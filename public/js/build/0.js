webpackJsonp([0],{272:function(t,e,a){var i=a(2)(a(275),a(276),!1,function(t){a(273)},"data-v-5457ca2e",null);t.exports=i.exports},273:function(t,e,a){var i=a(274);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(1)("75177e9a",i,!0,{})},274:function(t,e,a){(t.exports=a(0)(!1)).push([t.i,".w-content[data-v-5457ca2e]{position:absolute;top:72px;left:0;right:0;bottom:0;overflow:auto;background-repeat:no-repeat;background-position:50%;background-color:#eee;background-size:cover}.w-content .w-container[data-v-5457ca2e]{min-height:500px}",""])},275:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"WContent",data:function(){return{bgid:-1}},mounted:function(){this.bgid=$A.runNum(this.usrInfo.bgid)},watch:{usrInfo:{handler:function(t){this.bgid=$A.runNum(t.bgid)},deep:!0}},methods:{getBgUrl:function(t,e){return t<0?"none":(t=Math.max(1,parseInt(t)),"url("+window.location.origin+"/images/bg/"+(e?"thumb/":"")+t+".jpg)")}}}},276:function(t,e){t.exports={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"w-content",style:"background-image:"+this.getBgUrl(this.bgid)},[this._t("default")],2)},staticRenderFns:[]}},282:function(t,e,a){var i=a(10),o=a(8),s="[object Symbol]";t.exports=function(t){return"symbol"==typeof t||o(t)&&i(t)==s}},283:function(t,e,a){var i=a(282),o=1/0;t.exports=function(t){if("string"==typeof t||i(t))return t;var e=t+"";return"0"==e&&1/t==-o?"-0":e}},299:function(t,e,a){var i=a(2)(a(302),a(303),!1,function(t){a(300)},"data-v-5d1cd011",null);t.exports=i.exports},300:function(t,e,a){var i=a(301);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(1)("57691d55",i,!0,{})},301:function(t,e,a){(t.exports=a(0)(!1)).push([t.i,".project-archived .tableFill[data-v-5d1cd011]{margin:12px 12px 20px}",""])},302:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(7),o=a.n(i),s=a(30);e.default={name:"ProjectArchived",components:{DrawerTabsContainer:o.a},props:{projectid:{default:0},canload:{type:Boolean,default:!0}},mixins:[s.a],data:function(){return{loadYet:!1,loadIng:0,columns:[],lists:[],listPage:1,listTotal:0,noDataText:""}},mounted:function(){var t=this;this.canload&&(this.loadYet=!0,this.getLists(!0)),$A.setOnTaskInfoListener("components/project/archived",function(e,a){if(a.projectid==t.projectid)switch(t.lists.some(function(e,i){if(e.id==a.id)return t.lists.splice(i,1,a),!0}),e){case"delete":case"unarchived":t.lists.some(function(e,i){if(e.id==a.id)return t.lists.splice(i,1),!0});break;case"archived":var i=!1;t.lists.some(function(t){if(t.id==a.id)return i=!0}),i||t.lists.unshift(a)}})},watch:{projectid:function(){this.loadYet&&this.getLists(!0)},canload:function(t){t&&!this.loadYet&&(this.loadYet=!0,this.getLists(!0))}},methods:{initLanguage:function(){var t=this;this.noDataText=this.$L("数据加载中....."),this.columns=[{title:this.$L("任务名称"),key:"title",minWidth:120,render:function(e,a){return t.renderTaskTitle(e,a)}},{title:this.$L("创建人"),key:"createuser",minWidth:80,render:function(t,e){return t("UserView",{props:{username:e.row.createuser}})}},{title:this.$L("负责人"),key:"username",minWidth:80,render:function(t,e){return t("UserView",{props:{username:e.row.username}})}},{title:this.$L("完成"),minWidth:70,align:"center",render:function(t,e){return t("span",e.row.complete?"√":"-")}},{title:this.$L("归档时间"),width:160,render:function(t,e){return t("span",$A.formatDate("Y-m-d H:i:s",e.row.archiveddate))}},{title:this.$L("操作"),key:"action",width:100,align:"center",render:function(e,a){return e("Button",{props:{type:"primary",size:"small"},style:{fontSize:"12px"},on:{click:function(){t.$Modal.confirm({title:t.$L("取消归档"),content:t.$L("你确定要取消归档吗？"),loading:!0,onOk:function(){$A.apiAjax({url:"project/task/edit",method:"post",data:{act:"unarchived",taskid:a.row.id},error:function(){t.$Modal.remove(),alert(t.$L("网络繁忙，请稍后再试！"))},success:function(e){t.$Modal.remove(),t.getLists(),setTimeout(function(){1===e.ret?(t.$Message.success(e.msg),$A.triggerTaskInfoListener("unarchived",e.data),$A.triggerTaskInfoChange(a.row.id)):t.$Modal.error({title:t.$L("温馨提示"),content:e.msg})},350)}})}})}}},t.$L("取消归档"))}}]},setPage:function(t){this.listPage=t,this.getLists()},setPageSize:function(t){Math.max($A.runNum(this.listPageSize),10)!=t&&(this.listPageSize=t,this.getLists())},getLists:function(t){var e=this;if(!0===t&&(this.listPage=1),0==this.projectid)return this.lists=[],this.listTotal=0,void(this.noDataText=this.$L("没有相关的数据"));this.loadIng++,this.noDataText=this.$L("数据加载中....."),$A.apiAjax({url:"project/task/lists",data:{page:Math.max(this.listPage,1),pagesize:Math.max($A.runNum(this.listPageSize),10),projectid:this.projectid,archived:"已归档"},complete:function(){e.loadIng--},error:function(){e.noDataText=e.$L("数据加载失败！")},success:function(t){1===t.ret?(e.lists=t.data.lists,e.listTotal=t.data.total,e.noDataText=e.$L("没有相关的数据")):(e.lists=[],e.listTotal=0,e.noDataText=t.msg)}})}}}},303:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drawer-tabs-container",[a("div",{staticClass:"project-archived"},[a("Table",{ref:"tableRef",staticClass:"tableFill",attrs:{columns:t.columns,data:t.lists,loading:t.loadIng>0,"no-data-text":t.noDataText,stripe:""}}),t._v(" "),a("Page",{staticClass:"pageBox",attrs:{total:t.listTotal,current:t.listPage,disabled:t.loadIng>0,"page-size-opts":[10,20,30,50,100],placement:"top","show-elevator":"","show-sizer":"","show-total":"",transfer:"",simple:t.windowMax768},on:{"on-change":t.setPage,"on-page-size-change":t.setPageSize}})],1)])},staticRenderFns:[]}},304:function(t,e,a){var i=a(2)(a(307),a(308),!1,function(t){a(305)},"data-v-4fe24b67",null);t.exports=i.exports},305:function(t,e,a){var i=a(306);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(1)("75fcf5d4",i,!0,{})},306:function(t,e,a){(t.exports=a(0)(!1)).push([t.i,".project-users[data-v-4fe24b67]{padding:0 12px}.project-users .tableFill[data-v-4fe24b67]{margin:12px 0 20px}",""])},307:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(7),o=a.n(i);e.default={name:"ProjectUsers",components:{DrawerTabsContainer:o.a},props:{projectid:{default:0},canload:{type:Boolean,default:!0}},data:function(){return{loadYet:!1,loadIng:0,columns:[],lists:[],listPage:1,listTotal:0,noDataText:""}},mounted:function(){this.canload&&(this.loadYet=!0,this.getLists(!0))},watch:{projectid:function(){this.loadYet&&this.getLists(!0)},canload:function(t){t&&!this.loadYet&&(this.loadYet=!0,this.getLists(!0))}},methods:{initLanguage:function(){var t=this;this.noDataText=this.$L("数据加载中....."),this.columns=[{title:this.$L("头像"),minWidth:60,maxWidth:100,render:function(t,e){return t("UserImg",{props:{info:e.row},style:{width:"30px",height:"30px",fontSize:"16px",lineHeight:"30px",borderRadius:"15px",verticalAlign:"middle"}})}},{title:this.$L("用户名"),key:"username",minWidth:80,ellipsis:!0},{title:this.$L("昵称"),minWidth:80,ellipsis:!0,render:function(t,e){return t("span",e.row.nickname||"-")}},{title:this.$L("职位/职称"),minWidth:100,ellipsis:!0,render:function(t,e){return t("span",e.row.profession||"-")}},{title:this.$L("成员角色"),minWidth:100,render:function(e,a){return e("span",a.row.isowner?t.$L("项目负责人"):t.$L("成员"))}},{title:this.$L("加入时间"),width:160,render:function(t,e){return t("span",$A.formatDate("Y-m-d H:i:s",e.row.indate))}},{title:this.$L("操作"),key:"action",width:80,align:"center",render:function(e,a){return e("Button",{props:{type:"primary",size:"small"},style:{fontSize:"12px"},on:{click:function(){t.$Modal.confirm({title:t.$L("移出成员"),content:t.$L("你确定要将此成员移出项目吗？"),loading:!0,onOk:function(){$A.apiAjax({url:"project/users/join",data:{act:"delete",projectid:a.row.projectid,username:a.row.username},error:function(){t.$Modal.remove(),alert(t.$L("网络繁忙，请稍后再试！"))},success:function(e){t.$Modal.remove(),t.getLists(),setTimeout(function(){1===e.ret?t.$Message.success(e.msg):t.$Modal.error({title:t.$L("温馨提示"),content:e.msg})},350)}})}})}}},t.$L("删除"))}}]},setPage:function(t){this.listPage=t,this.getLists()},setPageSize:function(t){Math.max($A.runNum(this.listPageSize),10)!=t&&(this.listPageSize=t,this.getLists())},getLists:function(t){var e=this;if(!0===t&&(this.listPage=1),0==this.projectid)return this.lists=[],this.listTotal=0,void(this.noDataText=this.$L("没有相关的数据"));this.loadIng++,this.noDataText=this.$L("数据加载中....."),$A.apiAjax({url:"project/users/lists",data:{page:Math.max(this.listPage,1),pagesize:Math.max($A.runNum(this.listPageSize),10),projectid:this.projectid},complete:function(){e.loadIng--},error:function(){e.noDataText=e.$L("数据加载失败！")},success:function(t){1===t.ret?(e.lists=t.data.lists,e.listTotal=t.data.total,e.noDataText=e.$L("没有相关的数据")):(e.lists=[],e.listTotal=0,e.noDataText=t.msg)}})},addUser:function(){var t=this;this.userValue="",this.$Modal.confirm({render:function(e){return e("div",[e("div",{style:{fontSize:"16px",fontWeight:"500",marginBottom:"20px"}},t.$L("添加成员")),e("UserInput",{props:{value:t.userValue,multiple:!0,noprojectid:t.projectid,placeholder:t.$L("请输入昵称/用户名搜索")},on:{input:function(e){t.userValue=e}}})])},loading:!0,onOk:function(){if(t.userValue){var e=t.userValue;$A.apiAjax({url:"project/users/join",data:{act:"join",projectid:t.projectid,username:e},error:function(){t.$Modal.remove(),alert(t.$L("网络繁忙，请稍后再试！"))},success:function(e){t.$Modal.remove(),t.getLists(),setTimeout(function(){1===e.ret?t.$Message.success(e.msg):t.$Modal.error({title:t.$L("温馨提示"),content:e.msg})},350)}})}else t.$Modal.remove()}})}}}},308:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drawer-tabs-container",[a("div",{staticClass:"project-users"},[a("Button",{attrs:{loading:t.loadIng>0,type:"primary",icon:"md-add"},on:{click:t.addUser}},[t._v(t._s(t.$L("添加成员")))]),t._v(" "),a("Table",{ref:"tableRef",staticClass:"tableFill",attrs:{columns:t.columns,data:t.lists,loading:t.loadIng>0,"no-data-text":t.noDataText,stripe:""}}),t._v(" "),a("Page",{staticClass:"pageBox",attrs:{total:t.listTotal,current:t.listPage,disabled:t.loadIng>0,"page-size-opts":[10,20,30,50,100],placement:"top","show-elevator":"","show-sizer":"","show-total":"",transfer:"",simple:t.windowMax768},on:{"on-change":t.setPage,"on-page-size-change":t.setPageSize}})],1)])},staticRenderFns:[]}},309:function(t,e,a){var i=a(2)(a(312),a(313),!1,function(t){a(310)},"data-v-68e4a577",null);t.exports=i.exports},310:function(t,e,a){var i=a(311);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(1)("0a07fc7d",i,!0,{})},311:function(t,e,a){(t.exports=a(0)(!1)).push([t.i,'.project-statistics .tableFill[data-v-68e4a577]{margin:12px 12px 20px}.project-statistics ul.state-overview[data-v-68e4a577]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.project-statistics ul.state-overview>li[data-v-68e4a577]{-webkit-box-flex:1;-ms-flex:1;flex:1;cursor:pointer;margin:0 10px 5px}.project-statistics ul.state-overview>li>div[data-v-68e4a577]{position:relative;-webkit-box-shadow:0 1px 1px rgba(0,0,0,.05);box-shadow:0 1px 1px rgba(0,0,0,.05);-webkit-transition:all .2s;transition:all .2s;border-radius:6px;color:#fff;height:110px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.project-statistics ul.state-overview>li>div.terques[data-v-68e4a577]{background:#17be6b}.project-statistics ul.state-overview>li>div.purple[data-v-68e4a577]{background:#a218a5}.project-statistics ul.state-overview>li>div.red[data-v-68e4a577]{background:#ed3f14}.project-statistics ul.state-overview>li>div.yellow[data-v-68e4a577]{background:#f90}.project-statistics ul.state-overview>li>div.blue[data-v-68e4a577]{background:#2d8cf0}.project-statistics ul.state-overview>li>div[data-v-68e4a577]:hover{-webkit-box-shadow:2px 2px 8px 0 rgba(0,0,0,.38);box-shadow:2px 2px 8px 0 rgba(0,0,0,.38)}.project-statistics ul.state-overview>li>div[data-v-68e4a577]:after{position:absolute;content:"";left:50%;bottom:3px;width:0;height:2px;-webkit-transform:translate(-50%);transform:translate(-50%);background-color:#fff;border-radius:2px;-webkit-transition:all .3s;transition:all .3s;opacity:0}.project-statistics ul.state-overview>li>div>h1[data-v-68e4a577]{font-size:36px;margin:-2px 0 0;padding:0;font-weight:500}.project-statistics ul.state-overview>li>div>p[data-v-68e4a577]{font-size:18px;margin:0;padding:0}.project-statistics ul.state-overview>li.active>div[data-v-68e4a577]:after{width:90%;opacity:1}',""])},312:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(7),o=a.n(i),s=a(30);e.default={name:"ProjectStatistics",components:{DrawerTabsContainer:o.a},props:{projectid:{default:0},canload:{type:Boolean,default:!0}},mixins:[s.a],data:function(){return{loadYet:!1,loadIng:0,columns:[],taskType:"未完成",lists:[],listPage:1,listTotal:0,noDataText:"",statistics_unfinished:0,statistics_overdue:0,statistics_complete:0}},mounted:function(){var t=this;this.canload&&(this.loadYet=!0,this.getLists(!0)),$A.setOnTaskInfoListener("components/project/statistics",function(e,a){if(a.projectid==t.projectid)switch(t.lists.some(function(e,i){if(e.id==a.id)return t.lists.splice(i,1,a),!0}),e){case"delete":case"archived":t.lists.some(function(e,i){if(e.id==a.id)return t.lists.splice(i,1),e.complete?t.statistics_complete--:t.statistics_unfinished++,!0});break;case"unarchived":var i=!1;t.lists.some(function(e){if(e.id==a.id)return e.complete?t.statistics_complete++:t.statistics_unfinished--,i=!0}),i||t.lists.unshift(a);break;case"complete":t.statistics_complete++,t.statistics_unfinished--;break;case"unfinished":t.statistics_complete--,t.statistics_unfinished++}})},watch:{projectid:function(){this.loadYet&&this.getLists(!0)},canload:function(t){t&&!this.loadYet&&(this.loadYet=!0,this.getLists(!0))},taskType:function(){this.loadYet&&this.getLists(!0)}},methods:{initLanguage:function(){var t=this;this.noDataText=this.$L("数据加载中....."),this.columns=[{title:this.$L("任务名称"),key:"title",minWidth:120,render:function(e,a){return t.renderTaskTitle(e,a)}},{title:this.$L("创建人"),key:"createuser",minWidth:80,render:function(t,e){return t("UserView",{props:{username:e.row.createuser}})}},{title:this.$L("负责人"),key:"username",minWidth:80,render:function(t,e){return t("UserView",{props:{username:e.row.username}})}},{title:this.$L("完成"),minWidth:70,align:"center",render:function(t,e){return t("span",e.row.complete?"√":"-")}},{title:this.$L("创建时间"),width:160,render:function(t,e){return t("span",$A.formatDate("Y-m-d H:i:s",e.row.indate))}}]},setTaskType:function(t){this.taskType=t},setPage:function(t){this.listPage=t,this.getLists()},setPageSize:function(t){Math.max($A.runNum(this.listPageSize),10)!=t&&(this.listPageSize=t,this.getLists())},getLists:function(t){var e=this;if(!0===t&&(this.listPage=1),0==this.projectid)return this.lists=[],this.listTotal=0,void(this.noDataText=this.$L("没有相关的数据"));this.loadIng++;var a=this.taskType;this.noDataText=this.$L("数据加载中....."),$A.apiAjax({url:"project/task/lists",data:{page:Math.max(this.listPage,1),pagesize:Math.max($A.runNum(this.listPageSize),10),projectid:this.projectid,type:this.taskType,statistics:1},complete:function(){e.loadIng--},error:function(){e.noDataText=e.$L("数据加载失败！")},success:function(t){a==e.taskType&&(1===t.ret?(e.lists=t.data.lists,e.listTotal=t.data.total,e.noDataText=e.$L("没有相关的数据")):(e.lists=[],e.listTotal=0,e.noDataText=t.msg),e.statistics_unfinished=t.data.statistics_unfinished||0,e.statistics_overdue=t.data.statistics_overdue||0,e.statistics_complete=t.data.statistics_complete||0)}})}}}},313:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drawer-tabs-container",[a("div",{staticClass:"project-statistics"},[a("ul",{staticClass:"state-overview"},[a("li",{class:["未完成"===t.taskType?"active":""],on:{click:function(e){t.taskType="未完成"}}},[a("div",{staticClass:"yellow"},[a("h1",{staticClass:"count"},[t._v(t._s(t.statistics_unfinished))]),t._v(" "),a("p",[t._v(t._s(t.$L("未完成任务")))])])]),t._v(" "),a("li",{class:["已超期"===t.taskType?"active":""],on:{click:function(e){t.taskType="已超期"}}},[a("div",{staticClass:"red"},[a("h1",{staticClass:"count"},[t._v(t._s(t.statistics_overdue))]),t._v(" "),a("p",[t._v(t._s(t.$L("超期任务")))])])]),t._v(" "),a("li",{class:["已完成"===t.taskType?"active":""],on:{click:function(e){t.taskType="已完成"}}},[a("div",{staticClass:"terques"},[a("h1",{staticClass:"count"},[t._v(t._s(t.statistics_complete))]),t._v(" "),a("p",[t._v(t._s(t.$L("已完成任务")))])])])]),t._v(" "),a("Table",{ref:"tableRef",staticClass:"tableFill",attrs:{columns:t.columns,data:t.lists,loading:t.loadIng>0,"no-data-text":t.noDataText,stripe:""}}),t._v(" "),a("Page",{staticClass:"pageBox",attrs:{total:t.listTotal,current:t.listPage,disabled:t.loadIng>0,"page-size-opts":[10,20,30,50,100],placement:"top","show-elevator":"","show-sizer":"","show-total":"",transfer:"",simple:t.windowMax768},on:{"on-change":t.setPage,"on-page-size-change":t.setPageSize}})],1)])},staticRenderFns:[]}},314:function(t,e,a){var i=a(380),o=a(283);t.exports=function(t,e){for(var a=0,s=(e=i(e,t)).length;null!=t&&a<s;)t=t[o(e[a++])];return a&&a==s?t:void 0}},315:function(t,e,a){var i=a(16),o=a(282),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;t.exports=function(t,e){if(i(t))return!1;var a=typeof t;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=t&&!o(t))||n.test(t)||!s.test(t)||null!=e&&t in Object(e)}},379:function(t,e){t.exports=function(t,e){for(var a=-1,i=null==t?0:t.length,o=Array(i);++a<i;)o[a]=e(t[a],a,t);return o}},380:function(t,e,a){var i=a(16),o=a(315),s=a(509),n=a(512);t.exports=function(t,e){return i(t)?t:o(t,e)?[t]:s(n(t))}},381:function(t,e,a){var i=a(517),o=a(8);t.exports=function t(e,a,s,n,r){return e===a||(null==e||null==a||!o(e)&&!o(a)?e!=e&&a!=a:i(e,a,s,n,t,r))}},382:function(t,e,a){var i=a(518),o=a(521),s=a(522),n=1,r=2;t.exports=function(t,e,a,l,c,d){var p=a&n,u=t.length,f=e.length;if(u!=f&&!(p&&f>u))return!1;var m=d.get(t),h=d.get(e);if(m&&h)return m==e&&h==t;var b=-1,g=!0,v=a&r?new i:void 0;for(d.set(t,e),d.set(e,t);++b<u;){var x=t[b],k=e[b];if(l)var w=p?l(k,x,b,e,t,d):l(x,k,b,t,e,d);if(void 0!==w){if(w)continue;g=!1;break}if(v){if(!o(e,function(t,e){if(!s(v,e)&&(x===t||c(x,t,a,l,d)))return v.push(e)})){g=!1;break}}else if(x!==k&&!c(x,k,a,l,d)){g=!1;break}}return d.delete(t),d.delete(e),g}},383:function(t,e,a){var i=a(9);t.exports=function(t){return t==t&&!i(t)}},384:function(t,e){t.exports=function(t,e){return function(a){return null!=a&&a[t]===e&&(void 0!==e||t in Object(a))}}},385:function(t,e){t.exports=function(t){return t}},475:function(t,e,a){var i=a(476);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(1)("ac29a662",i,!0,{})},476:function(t,e,a){(t.exports=a(0)(!1)).push([t.i,"#project-panel-enter-textarea{background:transparent;background:none;outline:none;border:0;resize:none;padding:0;margin:8px 0;line-height:22px;border-radius:0;color:rgba(0,0,0,.85)}#project-panel-enter-textarea:focus{border-color:transparent;-webkit-box-shadow:none;box-shadow:none}",""])},477:function(t,e,a){var i=a(478);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(1)("5adcd6ae",i,!0,{})},478:function(t,e,a){(t.exports=a(0)(!1)).push([t.i,".project-panel .label-box[data-v-ea87b5f6]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-wrap:nowrap;flex-wrap:nowrap;overflow-x:auto;overflow-y:hidden;-webkit-overflow-scrolling:touch;width:100%;height:100%;padding:15px;-webkit-transform:translateZ(0);transform:translateZ(0)}.project-panel .label-box .label-item[data-v-ea87b5f6]{-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;-ms-flex-negative:0;flex-shrink:0;-ms-flex-preferred-size:auto;flex-basis:auto;position:relative;overflow:hidden;height:100%;padding-right:15px}.project-panel .label-box .label-item.label-create[data-v-ea87b5f6]{cursor:pointer}.project-panel .label-box .label-item.label-create:hover .trigger-box[data-v-ea87b5f6]{-webkit-transform:translateY(-50%) scale(1.1);transform:translateY(-50%) scale(1.1)}.project-panel .label-box .label-item.label-scroll:hover .label-bottom[data-v-ea87b5f6]{-webkit-transform:translate(-50%);transform:translate(-50%)}.project-panel .label-box .label-item .label-body[data-v-ea87b5f6]{width:300px;height:100%;border-radius:.15rem;background-color:#ebecf0;overflow:hidden;position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.project-panel .label-box .label-item .label-body .title-box[data-v-ea87b5f6]{padding:0 12px;font-weight:700;color:#666;position:relative;cursor:move;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:42px}.project-panel .label-box .label-item .label-body .title-box .title-loading[data-v-ea87b5f6]{width:16px;height:16px;margin-right:6px}.project-panel .label-box .label-item .label-body .title-box h2[data-v-ea87b5f6]{-webkit-box-flex:1;-ms-flex:1;flex:1;font-size:16px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.project-panel .label-box .label-item .label-body .title-box i[data-v-ea87b5f6]{font-weight:500;font-size:18px;height:100%;line-height:42px;width:42px;text-align:right;cursor:pointer}.project-panel .label-box .label-item .label-body .task-box[data-v-ea87b5f6]{position:relative;-webkit-box-flex:1;-ms-flex:1;flex:1;width:100%;padding:0 12px 2px;-webkit-transform:translateZ(0);transform:translateZ(0)}.project-panel .label-box .label-item .label-body .task-box .task-main[data-v-ea87b5f6]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.project-panel .label-box .label-item .label-body .task-box .task-main.filtr-persons .task-item[data-v-ea87b5f6]{display:none}.project-panel .label-box .label-item .label-body .task-box .task-main.filtr-persons .task-item.persons-item[data-v-ea87b5f6]{display:block}.project-panel .label-box .label-item .label-body .task-box .task-main.filtr-follower .task-item[data-v-ea87b5f6]{display:none}.project-panel .label-box .label-item .label-body .task-box .task-main.filtr-follower .task-item.follower-item[data-v-ea87b5f6]{display:block}.project-panel .label-box .label-item .label-body .task-box .task-main.filtr-create .task-item[data-v-ea87b5f6]{display:none}.project-panel .label-box .label-item .label-body .task-box .task-main.filtr-create .task-item.create-item[data-v-ea87b5f6]{display:block}.project-panel .label-box .label-item .label-body .task-box .task-item[data-v-ea87b5f6]{width:100%}.project-panel .label-box .label-item .label-body .task-box .task-item.task-draggable .task-shadow[data-v-ea87b5f6]{cursor:pointer}.project-panel .label-box .label-item .label-body .task-box .task-item.task-draggable .task-shadow[data-v-ea87b5f6]:hover{-webkit-box-shadow:0 0 4px 0 rgba(0,0,0,.38);box-shadow:0 0 4px 0 rgba(0,0,0,.38)}.project-panel .label-box .label-item .label-body .task-box .task-item .task-shadow[data-v-ea87b5f6]{margin:5px 0 4px;padding:8px 10px 8px 8px;background-color:#fff;border-left:2px solid #bf9f03;border-right:0;color:#091e42;border-radius:3px;-webkit-box-shadow:0 1px 1px rgba(0,0,0,.05);box-shadow:0 1px 1px rgba(0,0,0,.05);-webkit-transition:all .3s;transition:all .3s;-webkit-transform:scale(1);transform:scale(1)}.project-panel .label-box .label-item .label-body .task-box .task-item .task-shadow.p1[data-v-ea87b5f6]{border-left-color:red}.project-panel .label-box .label-item .label-body .task-box .task-item .task-shadow.p2[data-v-ea87b5f6]{border-left-color:#bb9f35}.project-panel .label-box .label-item .label-body .task-box .task-item .task-shadow.p3[data-v-ea87b5f6]{border-left-color:#449edd}.project-panel .label-box .label-item .label-body .task-box .task-item .task-shadow.p4[data-v-ea87b5f6]{border-left-color:#84a83b}.project-panel .label-box .label-item .label-body .task-box .task-item .task-shadow.complete[data-v-ea87b5f6]{border-left-color:#c1c1c1}.project-panel .label-box .label-item .label-body .task-box .task-item .task-shadow.complete .task-title[data-v-ea87b5f6]{color:#666;text-decoration:line-through}.project-panel .label-box .label-item .label-body .task-box .task-item .task-shadow.complete .task-more .task-status[data-v-ea87b5f6]{color:#666}.project-panel .label-box .label-item .label-body .task-box .task-item .task-shadow.overdue .task-title[data-v-ea87b5f6]{font-weight:700}.project-panel .label-box .label-item .label-body .task-box .task-item .task-shadow.overdue .task-more .task-status[data-v-ea87b5f6]{color:red}.project-panel .label-box .label-item .label-body .task-box .task-item .task-shadow.newtask[data-v-ea87b5f6]{-webkit-transform:scale(1.5);transform:scale(1.5)}.project-panel .label-box .label-item .label-body .task-box .task-item .task-shadow .task-title[data-v-ea87b5f6]{font-size:12px;color:#091e42;word-break:break-all}.project-panel .label-box .label-item .label-body .task-box .task-item .task-shadow .task-title .ivu-icon[data-v-ea87b5f6]{font-size:14px;color:#afafaf;vertical-align:top;padding:2px 4px;-webkit-transform:scale(.94);transform:scale(.94)}.project-panel .label-box .label-item .label-body .task-box .task-item .task-shadow .task-more[data-v-ea87b5f6]{min-height:30px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.project-panel .label-box .label-item .label-body .task-box .task-item .task-shadow .task-more .task-status[data-v-ea87b5f6]{color:#19be6b;font-size:12px;-webkit-box-flex:1;-ms-flex:1;flex:1}.project-panel .label-box .label-item .label-body .task-box .task-item .task-shadow .task-more .task-persons[data-v-ea87b5f6]{max-width:150px}.project-panel .label-box .label-item .label-body .task-box .task-item .task-shadow .task-more .task-persons.persons-more[data-v-ea87b5f6]{text-align:right}.project-panel .label-box .label-item .label-body .task-box .task-item .task-shadow .task-more .task-persons.persons-more .task-userimg[data-v-ea87b5f6]{width:20px;height:20px;margin-left:4px;margin-top:4px}.project-panel .label-box .label-item .label-body .task-box .task-item .task-shadow .task-more .task-persons.persons-more .task-userimg .avatar[data-v-ea87b5f6]{width:20px;height:20px;font-size:12px;line-height:20px}.project-panel .label-box .label-item .label-body .task-box .task-item .task-shadow .task-more .task-persons .task-userimg[data-v-ea87b5f6]{width:26px;height:26px;vertical-align:bottom}.project-panel .label-box .label-item .label-body .task-box .task-item .task-shadow .task-more .task-persons .task-userimg .avatar[data-v-ea87b5f6]{width:26px;height:26px;font-size:14px;line-height:26px;border-radius:13px}.project-panel .label-box .label-item .label-body .task-box .task-item .task-shadow .subtask-progress[data-v-ea87b5f6]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:-1;border-radius:0 3px 3px 0;overflow:hidden;pointer-events:none}.project-panel .label-box .label-item .label-body .task-box .task-item .task-shadow .subtask-progress em[data-v-ea87b5f6]{display:block;height:100%;background-color:rgba(3,150,242,.07)}.project-panel .label-box .label-item .label-body .trigger-box[data-v-ea87b5f6]{text-align:center;font-size:16px;color:#666;width:100%;position:absolute;top:50%;-webkit-transform:translateY(-50%) scale(1);transform:translateY(-50%) scale(1);-webkit-transition:all .3s;transition:all .3s}.project-panel .label-box .label-item .label-bottom[data-v-ea87b5f6]{position:absolute;left:50%;bottom:14px;z-index:1;width:36px;height:36px;border-radius:50%;background-color:#2db7f5;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-transition:-webkit-transform .2s;transition:-webkit-transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s;-webkit-transform:translate(-50%,200%);transform:translate(-50%,200%);cursor:pointer}.project-panel .label-box .label-item .label-bottom .label-bottom-icon[data-v-ea87b5f6]{color:#fff;font-size:36px}",""])},479:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(51),o=a.n(i),s=a(272),n=a.n(s),r=a(480),l=a.n(r),c=a(487),d=a.n(c),p=a(57),u=a.n(p),f=a(58),m=a.n(f),h=a(299),b=a.n(h),g=a(304),v=a.n(g),x=a(309),k=a.n(x),w=a(49),j=a.n(w),_=a(492),y=a.n(_),$=a(502),L=a.n($),D=a(56),T=a.n(D),S=a(507),C=a.n(S),I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function M(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}e.default={components:{ScrollerY:T.a,ProjectSetting:L.a,ProjectGantt:y.a,WDrawer:j.a,ProjectStatistics:k.a,ProjectUsers:v.a,ProjectArchived:b.a,ProjectTaskLogs:m.a,ProjectTaskFiles:u.a,ProjectTaskLists:d.a,ProjectAddTask:l.a,draggable:o.a,WContent:n.a},data:function(){return{loadIng:0,loadDetailed:!1,projectid:0,projectDetail:{},projectLabel:[],projectSimpleLabel:[],projectSortData:"",projectSortDisabled:!1,projectDrawerShow:!1,projectDrawerTab:"lists",projectSettingDrawerShow:!1,projectSettingDrawerTab:"setting",projectGanttShow:!1,filtrTask:"",routeName:""}},mounted:function(){var t=this;this.routeName=this.$route.name,$A.setOnTaskInfoListener("pages/project-panel",function(e,a){if(a.projectid==t.projectid){switch(e){case"addlabel":return void(0==t.projectLabel.filter(function(t){return t.id==a.labelid}).length&&(t.projectLabel.push(Object.assign(a,{id:a.labelid})),t.projectSortData=t.getProjectSort()));case"deletelabel":return void t.projectLabel.some(function(e,i){if(e.id==a.labelid)return t.projectLabel.splice(i,1),t.projectSortData=t.getProjectSort(),!0});case"deleteproject":return;case"labelsort":case"tasksort":return void(a.__modifyUsername!=t.usrName&&(t.routeName==t.$route.name?t.$Modal.confirm({title:t.$L("更新提示"),content:t.$L("团队成员（%）调整了%，<br/>更新时间：%。<br/><br/>点击【确定】加载最新数据。",a.nickname,t.$L("labelsort"==e?"分类排序":"任务排序"),$A.formatDate("Y-m-d H:i:s",a.time)),onOk:function(){t.getDetail(!0)}}):t.getDetail(!0)))}switch(t.projectLabel.forEach(function(t){t.taskLists.some(function(e,i){if(e.id==a.id)return t.taskLists.splice(i,1,a),!0})}),e){case"delete":case"archived":t.projectLabel.forEach(function(t){t.taskLists.some(function(e,i){if(e.id==a.id)return t.taskLists.splice(i,1),!0})}),t.projectSortData=t.getProjectSort();break;case"create":t.projectLabel.some(function(e){if(e.id==a.labelid)return 0==e.taskLists.filter(function(t){return t.id==a.id}).length&&(a.isNewtask=!0,a.insertbottom?e.taskLists.push(a):e.taskLists.unshift(a),t.$nextTick(function(){t.$set(a,"isNewtask",!1)})),!0});break;case"unarchived":t.projectLabel.forEach(function(t){if(t.id==a.labelid){var e=t.taskLists.length;t.taskLists.some(function(t,i){if(a.inorder>t.inorder||a.inorder==t.inorder&&a.id>t.id)return e=i,!0}),t.taskLists.splice(e,0,a)}}),t.projectSortData=t.getProjectSort();break;case"complete":case"unfinished":t.taskNewSort()}}},!0)},activated:function(){var t=this;this.projectid=this.$route.params.projectid,"object"===I(this.$route.params.other)&&this.$set(this.projectDetail,"title",$A.getObject(this.$route.params.other,"title")),"已完成"===this.$route.params.statistics&&(this.projectSettingDrawerTab="statistics",this.projectSettingDrawerShow=!0,this.$nextTick(function(){t.$refs.statistics.setTaskType("已完成")}))},deactivated:function(){!1===$A.getToken()&&(this.projectid=0),this.projectGanttShow=!1,this.projectDrawerShow=!1,this.projectSettingDrawerShow=!1},watch:{projectid:function(t){$A.runNum(t)<=0||(this.projectDetail={},this.projectLabel=[],this.projectSimpleLabel=[],this.getDetail())},$route:function(t){"project-panel"==t.name&&(this.projectid=t.params.projectid)}},methods:{getDetail:function(t){var e=this;this.loadIng++,$A.apiAjax({url:"project/detail",data:{projectid:this.projectid},complete:function(){e.loadIng--,e.loadDetailed=!0},error:function(){e.goBack({name:"project"}),alert(e.$L("网络繁忙，请稍后再试！"))},success:function(a){1===a.ret?(e.projectLabel=a.data.label,e.taskNewSort(),e.projectDetail=a.data.project,e.projectSimpleLabel=a.data.simpleLabel,e.projectSortData=e.getProjectSort(),!0===t&&e.$Message.success(e.$L("刷新成功！"))):e.$Modal.error({title:e.$L("温馨提示"),content:a.msg})}})},getProjectSort:function(){var t="",e="";return this.projectLabel.forEach(function(a){e="",a.taskLists.forEach(function(t){e&&(e+="-"),e+=t.id}),t&&(t+=";"),t+=a.id+":"+e}),t},handleLabel:function(t,e){switch(t){case"refresh":this.refreshLabel(e);break;case"rename":this.renameLabel(e);break;case"delete":this.deleteLabel(e)}},refreshLabel:function(t){var e=this;this.$set(t,"loadIng",!0),$A.apiAjax({url:"project/task/lists",data:{projectid:this.projectid,labelid:t.id},complete:function(){e.$set(t,"loadIng",!1)},error:function(){window.location.reload()},success:function(a){1===a.ret?e.$set(t,"taskLists",a.data.lists):window.location.reload()}})},renameLabel:function(t){var e=this;this.renameValue="",this.$Modal.confirm({render:function(t){return t("div",[t("div",{style:{fontSize:"16px",fontWeight:"500",marginBottom:"20px"}},e.$L("重命名列表")),t("Input",{props:{value:e.renameValue,autofocus:!0,placeholder:e.$L("请输入新的列表名称")},on:{input:function(t){e.renameValue=t}}})])},loading:!0,onOk:function(){if(e.renameValue){e.$set(t,"loadIng",!0);var a=e.renameValue;$A.apiAjax({url:"project/label/rename",data:{projectid:e.projectid,labelid:t.id,title:a},complete:function(){e.$set(t,"loadIng",!1)},error:function(){e.$Modal.remove(),alert(e.$L("网络繁忙，请稍后再试！"))},success:function(i){e.$Modal.remove(),e.$set(t,"title",a),setTimeout(function(){1===i.ret?e.$Message.success(i.msg):e.$Modal.error({title:e.$L("温馨提示"),content:i.msg})},350)}})}else e.$Modal.remove()}})},deleteLabel:function(t){var e=this,a=t.taskLists.length>0?'<div style="color:red;font-weight:500">'+this.$L("注：将同时删除列表下所有任务")+"</div>":"";this.$Modal.confirm({title:this.$L("删除列表"),content:"<div>"+this.$L("你确定要删除此列表吗？")+"</div>"+a,loading:!0,onOk:function(){$A.apiAjax({url:"project/label/delete",data:{projectid:e.projectid,labelid:t.id},error:function(){e.$Modal.remove(),alert(e.$L("网络繁忙，请稍后再试！"))},success:function(a){e.$Modal.remove(),e.projectLabel.some(function(a,i){if(a.id==t.id)return e.projectLabel.splice(i,1),e.projectSortData=e.getProjectSort(),!0}),setTimeout(function(){1===a.ret?(e.$Message.success(a.msg),$A.triggerTaskInfoListener("deletelabel",{labelid:t.id,projectid:t.projectid})):e.$Modal.error({title:e.$L("温馨提示"),content:a.msg})},350)}})}})},addLabel:function(){var t=this;this.labelValue="",this.$Modal.confirm({render:function(e){return e("div",[e("div",{style:{fontSize:"16px",fontWeight:"500",marginBottom:"20px"}},t.$L("添加列表")),e("Input",{props:{value:t.labelValue,autofocus:!0,placeholder:t.$L("请输入列表名称")},on:{input:function(e){t.labelValue=e}}})])},loading:!0,onOk:function(){if(t.labelValue){var e={projectid:t.projectid,title:t.labelValue};$A.apiAjax({url:"project/label/add",data:e,error:function(){t.$Modal.remove(),alert(t.$L("网络繁忙，请稍后再试！"))},success:function(a){t.$Modal.remove(),t.projectLabel.push(a.data),t.projectSortData=t.getProjectSort(),$A.triggerTaskInfoListener("addlabel",Object.assign(e,{labelid:a.data.id})),setTimeout(function(){1===a.ret?t.$Message.success(a.msg):t.$Modal.error({title:t.$L("温馨提示"),content:a.msg})},350)}})}else t.$Modal.remove()}})},addTaskSuccess:function(t,e){var a=this;e.taskLists instanceof Array?(t.isNewtask=!0,t.insertbottom?e.taskLists.push(t):e.taskLists.unshift(t),this.$nextTick(function(){a.$set(t,"isNewtask",!1)})):this.refreshLabel(e)},openProjectDrawer:function(t){"projectGanttShow"!=t?"openProjectSettingDrawer"!=t?(this.projectDrawerTab=t,this.projectDrawerShow=!0):this.openProjectSettingDrawer("setting"):this.projectGanttShow=!this.projectGanttShow},openProjectSettingDrawer:function(t){this.projectSettingDrawerTab=t,this.projectSettingDrawerShow=!0},projectSortUpdate:function(t){var e=this,a=this.projectSortData,i=this.getProjectSort();a!=i&&(this.projectSortData=i,this.projectSortDisabled=!0,this.loadIng++,$A.apiAjax({url:"project/sort",data:{projectid:this.projectid,oldsort:a,newsort:i,label:!0===t?1:0},complete:function(){e.projectSortDisabled=!1,e.loadIng--},error:function(){e.getDetail(),alert(e.$L("网络繁忙，请稍后再试！"))},success:function(a){1===a.ret?(e.projectLabel.forEach(function(t){var e=t.taskLists.length;t.taskLists.forEach(function(t,a){t.inorder=e-a})}),e.taskNewSort(),e.$Message.success(a.msg),$A.triggerTaskInfoListener(t?"labelsort":"tasksort",{projectid:e.projectid,nickname:$A.getNickName(),time:Math.round((new Date).getTime()/1e3)})):(e.getDetail(),e.$Modal.error({title:e.$L("温馨提示"),content:a.msg}))}}))},projectMouse:function(t){var e=!1,a=this.$refs["box_"+t.id];a&&a.length>0&&(e=(a=a[0].$el).scrollHeight>a.offsetHeight),this.$set(t,"hasScroll",e)},projectBoxScroll:function(t,e){this.$set(e,"endScroll",t.scrollE<50)},projectFocus:function(t){var e=this.$refs["add_"+t.id];e&&e.length>0&&e[0].setFocus(),(e=this.$refs["box_"+t.id])&&e.length>0&&e[0].scrollToBottom(!1)},subtaskProgress:function(t){var e=t.subtask,a=t.complete;if(0===e.length)return a?100:0;var i=e.filter(function(t){return"complete"==t.status});return parseFloat((i.length/e.length*100).toFixed(2))},openTaskModal:function(t){this.taskDetail(t)},taskNewSort:function(){var t=this;this.$nextTick(function(){t.projectLabel.forEach(function(e){e.taskLists=t.taskReturnNewSort(e.taskLists)})})},taskReturnNewSort:function(t){var e=C()(t,["complete","inorder"],["asc","desc"]),a=[];return a.unshift.apply(a,M(e.filter(function(t){return t.complete}))),a.unshift.apply(a,M(e.filter(function(t){return!t.complete}))),a},isPersonsTask:function(t){var e=this;return t.persons&&!!t.persons.find(function(t){return t.username==e.usrInfo.username})},isFollowerTask:function(t){return t.follower&&-1!==t.follower.indexOf(this.usrInfo.username)},isCreateTask:function(t){return t.createuser==this.usrInfo.username}}}},480:function(t,e,a){var i=a(2)(a(485),a(486),!1,function(t){a(481),a(483)},"data-v-40d9253a",null);t.exports=i.exports},481:function(t,e,a){var i=a(482);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(1)("cd6c836e",i,!0,{})},482:function(t,e,a){(t.exports=a(0)(!1)).push([t.i,".enter-module-btn-drop-list .ivu-dropdown-item{padding:5px 16px;font-size:12px!important}",""])},483:function(t,e,a){var i=a(484);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(1)("a53476da",i,!0,{})},484:function(t,e,a){(t.exports=a(0)(!1)).push([t.i,".task-input-box[data-v-40d9253a]{position:relative;margin-top:5px;margin-bottom:20px;min-height:70px}.task-input-box .input-enter[data-v-40d9253a],.task-input-box .input-placeholder[data-v-40d9253a]{position:absolute;top:0;left:0;right:0;width:100%}.task-input-box .input-placeholder[data-v-40d9253a]{z-index:1;height:40px;line-height:40px;color:rgba(0,0,0,.36);padding-left:12px;padding-right:12px}.task-input-box .input-enter[data-v-40d9253a]{z-index:2;position:relative;background-color:transparent}.task-input-box .input-enter .input-enter-textarea[data-v-40d9253a]{border-radius:4px;padding-left:12px;padding-right:12px;color:rgba(0,0,0,.85)}.task-input-box .input-enter .input-enter-textarea.bright[data-v-40d9253a]{background-color:rgba(46,73,136,.08)}.task-input-box .input-enter .input-enter-textarea.highlight[data-v-40d9253a]{background-color:#fff}.task-input-box .input-enter .input-enter-module[data-v-40d9253a]{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;margin-top:8px;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.task-input-box .input-enter .input-enter-module .enter-module-icon[data-v-40d9253a]{display:inline-block;width:16px;height:16px;margin-right:5px;border-radius:4px;vertical-align:middle;cursor:pointer}.task-input-box .input-enter .input-enter-module .enter-module-icon.p1[data-v-40d9253a]{background-color:red}.task-input-box .input-enter .input-enter-module .enter-module-icon.p2[data-v-40d9253a]{background-color:#bb9f35}.task-input-box .input-enter .input-enter-module .enter-module-icon.p3[data-v-40d9253a]{background-color:#449edd}.task-input-box .input-enter .input-enter-module .enter-module-icon.p4[data-v-40d9253a]{background-color:#84a83b}.task-input-box .input-enter .input-enter-module .enter-module-icon.user[data-v-40d9253a]{width:24px;height:24px;margin-left:10px;margin-right:10px}.task-input-box .input-enter .input-enter-module .enter-module-icon.user .avatar[data-v-40d9253a]{width:24px;height:24px;font-size:14px;line-height:24px;border-radius:12px}.task-input-box .input-enter .input-enter-module .enter-module-icon.user i[data-v-40d9253a]{line-height:24px;font-size:16px}.task-input-box .input-enter .input-enter-module .enter-module-icon i[data-v-40d9253a]{width:100%;height:100%;color:#fff;line-height:16px;font-size:14px;-webkit-transform:scale(.85);transform:scale(.85);vertical-align:0}.task-input-box .input-enter .input-enter-module .enter-module-flex[data-v-40d9253a]{-webkit-box-flex:1;-ms-flex:1;flex:1}.task-input-box .input-enter .input-enter-module .enter-module-btn button[data-v-40d9253a]{font-size:12px}.task-input-box .input-enter .input-enter-module .enter-module-btn .enter-module-btn-1[data-v-40d9253a]{border-top-right-radius:0;border-bottom-right-radius:0}.task-input-box .input-enter .input-enter-module .enter-module-btn .enter-module-btn-2[data-v-40d9253a]{padding:0 2px;border-top-left-radius:0;border-bottom-left-radius:0}.task-input-box .input-enter .input-enter-module .enter-module-btn .enter-module-btn-drop[data-v-40d9253a]{margin-left:-4px;border-left:1px solid #c0daff}.task-input-box .load-box[data-v-40d9253a]{position:absolute;top:0;left:0;right:0;bottom:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;z-index:9}.task-input-box .load-box .load-box-main[data-v-40d9253a]{width:24px;height:24px}",""])},485:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"ProjectAddTask",props:{placeholder:{type:String,default:""},projectid:{type:Number,default:0},labelid:{type:Number,default:0}},data:function(){return{loadIng:0,addText:"",addLevel:2,addUserInfo:{},addFocus:!1,nameTipDisabled:!1}},mounted:function(){this.addUserInfo=$A.cloneData(this.usrInfo)},methods:{changeUser:function(t){void 0===t.username?this.addUserInfo=$A.cloneData(this.usrInfo):this.addUserInfo=t},dropAdd:function(t){"insertbottom"==t&&this.clickAdd(!0)},clickAdd:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=this.addText.trim();0==$A.count(a)||this.loadIng>0||(this.loadIng++,$A.apiAjax({url:"project/task/add",data:{projectid:this.projectid,labelid:this.labelid,title:a,level:this.addLevel,username:this.addUserInfo.username,insertbottom:e?1:0},complete:function(){t.loadIng--},error:function(){alert(t.$L("网络繁忙，请稍后再试！"))},success:function(a){1===a.ret?(t.addText="",t.addFocus=!1,t.$Message.success(a.msg),a.data.insertbottom=e,t.$emit("on-add-success",a.data),$A.triggerTaskInfoListener("create",a.data),$A.triggerTaskInfoChange(a.data.id)):t.$Modal.error({title:t.$L("温馨提示"),content:a.msg})}}))},addKeydown:function(t){if(13==t.keyCode){if(t.shiftKey)return;this.clickAdd(!1),t.preventDefault()}},setFocus:function(){this.$refs.addInput.focus()},onFocus:function(t){this.addFocus=t,this.$emit("on-focus",t)}}}},486:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task-input-box"},[t.addText?t._e():a("div",{staticClass:"input-placeholder"},[a("Icon",{attrs:{type:"md-create",size:"18"}}),t._v(" "+t._s(t.addFocus?""+t.$L("输入任务，回车即可保存"):t.placeholder)+"\n    ")],1),t._v(" "),a("div",{staticClass:"input-enter"},[a("Input",{ref:"addInput",staticClass:"input-enter-textarea",class:{bright:!0===t.addFocus,highlight:!!t.addText},attrs:{type:"textarea","element-id":"project-panel-enter-textarea",autosize:{minRows:1,maxRows:6},maxlength:255},on:{"on-focus":function(e){return t.onFocus(!0)},"on-blur":function(e){return t.onFocus(!1)},"on-keydown":t.addKeydown},model:{value:t.addText,callback:function(e){t.addText=e},expression:"addText"}}),t._v(" "),t.addText?a("div",{staticClass:"input-enter-module"},[a("Tooltip",{attrs:{content:t.$L("重要且紧急"),placement:"bottom",transfer:""}},[a("div",{staticClass:"enter-module-icon p1",on:{click:function(e){t.addLevel=1}}},["1"==t.addLevel?a("Icon",{attrs:{type:"md-checkmark"}}):t._e()],1)]),t._v(" "),a("Tooltip",{attrs:{content:t.$L("重要不紧急"),placement:"bottom",transfer:""}},[a("div",{staticClass:"enter-module-icon p2",on:{click:function(e){t.addLevel=2}}},["2"==t.addLevel?a("Icon",{attrs:{type:"md-checkmark"}}):t._e()],1)]),t._v(" "),a("Tooltip",{attrs:{content:t.$L("紧急不重要"),placement:"bottom",transfer:""}},[a("div",{staticClass:"enter-module-icon p3",on:{click:function(e){t.addLevel=3}}},["3"==t.addLevel?a("Icon",{attrs:{type:"md-checkmark"}}):t._e()],1)]),t._v(" "),a("Tooltip",{attrs:{content:t.$L("不重要不紧急"),placement:"bottom",transfer:""}},[a("div",{staticClass:"enter-module-icon p4",on:{click:function(e){t.addLevel=4}}},["4"==t.addLevel?a("Icon",{attrs:{type:"md-checkmark"}}):t._e()],1)]),t._v(" "),a("div",{staticClass:"enter-module-flex"}),t._v(" "),a("Poptip",{attrs:{placement:"bottom",transfer:""},on:{"on-popper-show":function(e){t.nameTipDisabled=!0},"on-popper-hide":function(e){t.nameTipDisabled=!1}}},[a("Tooltip",{attrs:{placement:"bottom",disabled:t.nameTipDisabled}},[a("div",{staticClass:"enter-module-icon user"},[a("UserImg",{staticClass:"avatar",attrs:{info:t.addUserInfo}})],1),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[t._v("\n                        "+t._s(t.$L("负责人"))+": "),a("UserView",{attrs:{username:t.addUserInfo.username}})],1)]),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{staticStyle:{width:"240px"}},[t._v("\n                        "+t._s(t.$L("选择负责人"))+"\n                        "),a("UserInput",{staticStyle:{margin:"5px 0 3px"},attrs:{projectid:t.projectid,placeholder:t.$L("留空默认: 自己")},on:{change:t.changeUser},model:{value:t.addUserInfo.username,callback:function(e){t.$set(t.addUserInfo,"username",e)},expression:"addUserInfo.username"}})],1)])],1),t._v(" "),a("div",{staticClass:"enter-module-btn"},[a("Button",{staticClass:"enter-module-btn-1",attrs:{type:"info",size:"small"},on:{click:function(e){return t.clickAdd(!1)}}},[t._v(t._s(t.$L("添加任务")))]),t._v(" "),a("Dropdown",{staticClass:"enter-module-btn-drop",attrs:{placement:"bottom-end",transfer:""},on:{"on-click":t.dropAdd}},[a("Button",{staticClass:"enter-module-btn-2",attrs:{type:"info",size:"small"}},[a("Icon",{attrs:{type:"ios-arrow-down"}})],1),t._v(" "),a("DropdownMenu",{staticClass:"enter-module-btn-drop-list",attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{attrs:{name:"insertbottom"}},[t._v(t._s(t.$L("添加至列表结尾")))])],1)],1)],1)],1):t._e()],1),t._v(" "),t.loadIng>0?a("div",{staticClass:"load-box",on:{click:function(t){t.stopPropagation()}}},[a("div",{staticClass:"load-box-main"},[a("w-loading")],1)]):t._e()])},staticRenderFns:[]}},487:function(t,e,a){var i=a(2)(a(490),a(491),!1,function(t){a(488)},"data-v-ca1cccde",null);t.exports=i.exports},488:function(t,e,a){var i=a(489);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(1)("74b554e3",i,!0,{})},489:function(t,e,a){(t.exports=a(0)(!1)).push([t.i,".project-task-lists[data-v-ca1cccde]{margin:0 12px}.project-task-lists .tableFill[data-v-ca1cccde]{margin:12px 0 20px}",""])},490:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(7),o=a.n(i),s=a(30);e.default={name:"ProjectTaskLists",components:{DrawerTabsContainer:o.a},props:{projectid:{default:0},canload:{type:Boolean,default:!0},labelLists:{type:Array}},mixins:[s.a],data:function(){return{keys:{},sorts:{key:"",order:""},loadYet:!1,loadIng:0,exportLoad:0,columns:[],lists:[],listPage:1,listTotal:0,noDataText:""}},mounted:function(){var t=this;this.canload&&(this.loadYet=!0,this.getLists(!0)),$A.setOnTaskInfoListener("components/project/task/lists",function(e,a){if(a.projectid==t.projectid)switch(t.lists.some(function(e,i){if(e.id==a.id)return t.lists.splice(i,1,a),!0}),e){case"username":case"delete":case"archived":t.lists.some(function(e,i){if(e.id==a.id)return t.lists.splice(i,1),!0});break;case"unarchived":var i=!1;t.lists.some(function(t){if(t.id==a.id)return i=!0}),i||t.lists.unshift(a)}})},watch:{projectid:function(){this.loadYet&&this.getLists(!0)},canload:function(t){t&&!this.loadYet&&(this.loadYet=!0,this.getLists(!0))}},methods:{initLanguage:function(){var t=this;this.noDataText=this.$L("数据加载中....."),this.columns=[{title:this.$L("任务名称"),key:"title",minWidth:120,render:function(e,a){return t.renderTaskTitle(e,a)}},{title:this.$L("阶段"),key:"labelid",minWidth:80,sortable:!0,render:function(e,a){var i=a.row.labelid,o=t.labelLists.find(function(t){return t.id===i});return e("span",o?o.title:i)}},{title:this.$L("计划时间"),key:"enddate",width:160,align:"center",sortable:!0,render:function(t,e){return e.row.startdate||e.row.enddate?t("div",{style:{fontSize:"12px",lineHeight:"14px"}},[t("div",e.row.startdate?$A.formatDate("Y-m-d H:i:s",e.row.startdate):"-"),t("div",e.row.enddate?$A.formatDate("Y-m-d H:i:s",e.row.enddate):"-")]):t("span","-")}},{title:this.$L("负责人"),key:"username",minWidth:90,sortable:!0,render:function(t,e){return t("UserView",{props:{username:e.row.username}})}},{title:this.$L("优先级"),key:"level",align:"center",minWidth:90,maxWidth:100,sortable:!0,render:function(t,e){var a=e.row.level,i=void 0;switch(a){case 1:i="#ff0000";break;case 2:i="#BB9F35";break;case 3:i="#449EDD";break;case 4:i="#84A83B"}return t("span",{style:{color:i}},"P"+a)}},{title:this.$L("状态"),key:"type",align:"center",minWidth:80,maxWidth:100,sortable:!0,render:function(e,a){var i=void 0,o=void 0;return a.row.overdue?(i="#ff0000",o=t.$L("已超期")):a.row.complete?(i="",o=t.$L("已完成")):(i="#19be6b",o=t.$L("未完成")),e("span",{style:{color:i}},o)}},{title:this.$L("创建时间"),key:"indate",width:160,sortable:!0,render:function(t,e){return t("span",$A.formatDate("Y-m-d H:i:s",e.row.indate))}}]},exportTab:function(){var t=this,e=$A.cloneData(this.keys);e.page=Math.max(this.listPage,1),e.pagesize=Math.max($A.runNum(this.listPageSize),10),e.projectid=this.projectid,e.sorts=$A.cloneData(this.sorts),e.export=1,this.exportLoad++,$A.apiAjax({url:"project/task/lists",data:e,complete:function(){t.exportLoad--},error:function(){alert(t.$L("网络繁忙，请稍后再试！"))},success:function(e){1===e.ret?t.$Modal.info({okText:t.$L("关闭"),render:function(a){return a("div",[a("div",{style:{fontSize:"16px",fontWeight:"500",marginBottom:"20px"}},t.$L("导出结果")),a("a",{attrs:{href:e.data.url,target:"_blank"}},t.$L("点击下载 (%)",e.data.size+" KB"))])}}):t.$Modal.error({title:t.$L("温馨提示"),content:e.msg})}})},sreachTab:function(t){!0===t&&(this.keys={}),this.getLists(!0)},sortChange:function(t){this.sorts={key:t.key,order:t.order},this.getLists(!0)},setPage:function(t){this.listPage=t,this.getLists()},setPageSize:function(t){Math.max($A.runNum(this.listPageSize),10)!=t&&(this.listPageSize=t,this.getLists())},getLists:function(t){var e=this;if(!0===t&&(this.listPage=1),0==this.projectid)return this.lists=[],this.listTotal=0,void(this.noDataText=this.$L("没有相关的数据"));this.loadIng++;var a=$A.cloneData(this.keys);a.page=Math.max(this.listPage,1),a.pagesize=Math.max($A.runNum(this.listPageSize),10),a.projectid=this.projectid,a.sorts=$A.cloneData(this.sorts),this.noDataText=this.$L("数据加载中....."),$A.apiAjax({url:"project/task/lists",data:a,complete:function(){e.loadIng--},error:function(){e.noDataText=e.$L("数据加载失败！")},success:function(t){1===t.ret?(e.lists=t.data.lists,e.listTotal=t.data.total,e.noDataText=e.$L("没有相关的数据")):(e.lists=[],e.listTotal=0,e.noDataText=t.msg)}})}}}},491:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drawer-tabs-container",[a("div",{staticClass:"project-task-lists"},[a("Row",{staticClass:"sreachBox"},[a("div",{staticClass:"item"},[a("div",{staticClass:"item-4"},[a("sreachTitle",{attrs:{val:t.keys.type}},[t._v(t._s(t.$L("状态")))]),t._v(" "),a("Select",{attrs:{placeholder:t.$L("全部")},model:{value:t.keys.type,callback:function(e){t.$set(t.keys,"type",e)},expression:"keys.type"}},[a("Option",{attrs:{value:""}},[t._v(t._s(t.$L("全部")))]),t._v(" "),a("Option",{attrs:{value:"未完成"}},[t._v(t._s(t.$L("未完成")))]),t._v(" "),a("Option",{attrs:{value:"已超期"}},[t._v(t._s(t.$L("已超期")))]),t._v(" "),a("Option",{attrs:{value:"已完成"}},[t._v(t._s(t.$L("已完成")))])],1)],1),t._v(" "),a("div",{staticClass:"item-4"},[a("sreachTitle",{attrs:{val:t.keys.username}},[t._v(t._s(t.$L("负责人")))]),t._v(" "),a("Input",{attrs:{placeholder:t.$L("用户名")},model:{value:t.keys.username,callback:function(e){t.$set(t.keys,"username",e)},expression:"keys.username"}})],1),t._v(" "),a("div",{staticClass:"item-4"},[a("sreachTitle",{attrs:{val:t.keys.level}},[t._v(t._s(t.$L("级别")))]),t._v(" "),a("Select",{attrs:{placeholder:t.$L("全部")},model:{value:t.keys.level,callback:function(e){t.$set(t.keys,"level",e)},expression:"keys.level"}},[a("Option",{attrs:{value:""}},[t._v(t._s(t.$L("全部")))]),t._v(" "),a("Option",{attrs:{value:"1"}},[t._v("P1")]),t._v(" "),a("Option",{attrs:{value:"2"}},[t._v("P2")]),t._v(" "),a("Option",{attrs:{value:"3"}},[t._v("P3")]),t._v(" "),a("Option",{attrs:{value:"4"}},[t._v("P4")])],1)],1),t._v(" "),a("div",{staticClass:"item-4"},[a("sreachTitle",{attrs:{val:t.keys.labelid}},[t._v(t._s(t.$L("阶段")))]),t._v(" "),a("Select",{attrs:{placeholder:t.$L("全部")},model:{value:t.keys.labelid,callback:function(e){t.$set(t.keys,"labelid",e)},expression:"keys.labelid"}},[a("Option",{attrs:{value:""}},[t._v(t._s(t.$L("全部")))]),t._v(" "),t._l(t.labelLists,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.title))])})],2)],1)]),t._v(" "),a("div",{staticClass:"item item-button"},[a("Button",{staticClass:"left-btn",attrs:{type:"info",icon:"md-swap",loading:t.exportLoad>0},on:{click:t.exportTab}},[t._v(t._s(t.$L("导出列表")))]),t._v(" "),""!=t.$A.objImplode(t.keys)?a("Button",{attrs:{type:"text"},on:{click:function(e){return t.sreachTab(!0)}}},[t._v(t._s(t.$L("取消筛选")))]):t._e(),t._v(" "),a("Button",{attrs:{type:"primary",icon:"md-search",loading:t.loadIng>0},on:{click:t.sreachTab}},[t._v(t._s(t.$L("搜索")))])],1)]),t._v(" "),a("Table",{ref:"tableRef",staticClass:"tableFill",attrs:{columns:t.columns,data:t.lists,loading:t.loadIng>0,"no-data-text":t.noDataText,stripe:""},on:{"on-sort-change":t.sortChange}}),t._v(" "),a("Page",{staticClass:"pageBox",attrs:{total:t.listTotal,current:t.listPage,disabled:t.loadIng>0,"page-size-opts":[10,20,30,50,100],placement:"top","show-elevator":"","show-sizer":"","show-total":"",transfer:"",simple:t.windowMax768},on:{"on-change":t.setPage,"on-page-size-change":t.setPageSize}})],1)])},staticRenderFns:[]}},492:function(t,e,a){var i=a(2)(a(495),a(501),!1,function(t){a(493)},null,null);t.exports=i.exports},493:function(t,e,a){var i=a(494);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(1)("0d9b6e14",i,!0,{})},494:function(t,e,a){(t.exports=a(0)(!1)).push([t.i,".project-gstc-gantt{position:absolute;top:15px;left:15px;right:15px;bottom:15px;z-index:1;-webkit-transform:translateZ(0);transform:translateZ(0);background-color:#fdfdfd;border-radius:3px;overflow:hidden}.project-gstc-gantt .project-gstc-dropdown-filtr{position:absolute;top:38px;left:222px}.project-gstc-gantt .project-gstc-dropdown-filtr .project-gstc-dropdown-icon{cursor:pointer;color:#999;font-size:20px}.project-gstc-gantt .project-gstc-dropdown-filtr .project-gstc-dropdown-icon.filtr{color:#058ce4}.project-gstc-gantt .project-gstc-close{position:absolute;top:8px;left:12px;cursor:pointer}.project-gstc-gantt .project-gstc-close:hover i{-webkit-transform:scale(1) rotate(45deg);transform:scale(1) rotate(45deg)}.project-gstc-gantt .project-gstc-close i{color:#666;font-size:28px;-webkit-transform:scale(.92);transform:scale(.92);-webkit-transition:all .2s;transition:all .2s}.project-gstc-gantt .project-gstc-edit{position:absolute;bottom:6px;right:6px;background:#fff;border-radius:4px;opacity:0;-webkit-transform:translate(120%);transform:translate(120%);-webkit-transition:all .2s;transition:all .2s}.project-gstc-gantt .project-gstc-edit.visible{opacity:1;-webkit-transform:translate(0);transform:translate(0)}.project-gstc-gantt .project-gstc-edit.info .project-gstc-edit-info{display:block}.project-gstc-gantt .project-gstc-edit.info .project-gstc-edit-small{display:none}.project-gstc-gantt .project-gstc-edit .project-gstc-edit-info{display:none;border:1px solid #e4e4e4;background:#fff;padding:6px;border-radius:4px;width:500px}.project-gstc-gantt .project-gstc-edit .project-gstc-edit-info .project-gstc-edit-btns{margin:12px 6px 4px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.project-gstc-gantt .project-gstc-edit .project-gstc-edit-info .project-gstc-edit-btns .ivu-btn{margin-right:8px;font-size:13px}.project-gstc-gantt .project-gstc-edit .project-gstc-edit-info .project-gstc-edit-btns .zoom{font-size:20px;color:#444;cursor:pointer}.project-gstc-gantt .project-gstc-edit .project-gstc-edit-info .project-gstc-edit-btns .zoom:hover{color:#57a3f3}.project-gstc-gantt .project-gstc-edit .project-gstc-edit-small{border:1px solid #e4e4e4;background:#fff;padding:6px 12px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.project-gstc-gantt .project-gstc-edit .project-gstc-edit-small .project-gstc-edit-text{cursor:pointer;text-decoration:underline;color:#444;margin-right:8px}.project-gstc-gantt .project-gstc-edit .project-gstc-edit-small .project-gstc-edit-text:hover{color:#57a3f3}.project-gstc-gantt .project-gstc-edit .project-gstc-edit-small .ivu-btn{margin-left:4px;font-size:13px}",""])},495:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(496),o=a.n(i);e.default={name:"ProjectGantt",components:{GanttView:o.a},props:{projectLabel:{default:[]}},data:function(){return{loadFinish:!1,lists:[],editColumns:[],editData:[],editShowInfo:!1,editLoad:0,filtrProjectId:0}},mounted:function(){this.editColumns=[{title:this.$L("任务名称"),key:"label",minWidth:150,ellipsis:!0},{title:this.$L("原计划时间"),minWidth:135,align:"center",render:function(t,e){return!0===e.row.notime?t("span","-"):t("div",{style:{}},[t("div",$A.formatDate("Y-m-d H:i",Math.round(e.row.backTime.start/1e3))),t("div",$A.formatDate("Y-m-d H:i",Math.round(e.row.backTime.end/1e3)))])}},{title:this.$L("新计划时间"),minWidth:135,align:"center",render:function(t,e){return t("div",{style:{}},[t("div",$A.formatDate("Y-m-d H:i",Math.round(e.row.newTime.start/1e3))),t("div",$A.formatDate("Y-m-d H:i",Math.round(e.row.newTime.end/1e3)))])}}],this.initData(),this.loadFinish=!0},watch:{projectLabel:{handler:function(){this.initData()},deep:!0}},methods:{initData:function(){var t=this;this.lists=[],this.projectLabel.forEach(function(e){t.filtrProjectId>0&&e.id!=t.filtrProjectId||e.taskLists.forEach(function(e){var a=0==e.startdate||0==e.enddate,i=t.getTimeObj(e),o=i.start,s=i.end,n="#058ce4";e.complete?n="#c1c1c1":1===e.level?n="#ff0000":2===e.level?n="#BB9F35":3===e.level?n="#449EDD":4===e.level&&(n="#84A83B");var r={start:o,end:s},l=t.editData.find(function(t){return t.id==e.id});l&&(l.backTime=$A.cloneData(r),r=$A.cloneData(l.newTime)),t.lists.push({id:e.id,label:e.title,time:r,notime:a,style:{background:n}})})}),0==this.lists.length&&0==this.filtrProjectId&&this.$Modal.warning({title:this.$L("温馨提示"),content:this.$L("任务列表为空，请先添加任务。"),onOk:function(){t.$emit("on-close")}})},updateTime:function(t){var e=this.getRawTime(t.id);if(Math.abs(e.end-t.time.end)>1e3||Math.abs(e.start-t.time.start)>1e3){var a=$A.cloneData(e),i=$A.cloneData(t.time),o=this.editData.find(function(e){return e.id==t.id});o?o.newTime=i:this.editData.push({id:t.id,label:t.label,notime:t.notime,backTime:a,newTime:i})}},clickItem:function(t){this.taskDetail(t.id)},editSubmit:function(t){var e=this,a=[];this.editData.forEach(function(i){if(t){e.editLoad++;var o=$A.formatDate("Y-m-d H:i",Math.round(i.newTime.start/1e3)),s=$A.formatDate("Y-m-d H:i",Math.round(i.newTime.end/1e3)),n={act:"plannedtime",taskid:i.id,content:o+","+s};$A.apiAjax({url:"project/task/edit",method:"post",data:n,error:function(){e.lists.some(function(t){if(t.id==i.id)return e.$set(t,"time",i.backTime),!0})},success:function(t){1===t.ret?a.push({status:"await",act:n.act,taskid:n.taskid,data:t.data}):e.lists.some(function(t){if(t.id==i.id)return e.$set(t,"time",i.backTime),!0})},afterComplete:function(){e.editLoad--,e.editLoad<=0&&a.forEach(function(t){"await"==t.status&&(t.status="trigger",$A.triggerTaskInfoListener(t.act,t.data),$A.triggerTaskInfoChange(t.taskid))})}})}else e.lists.some(function(t){if(t.id==i.id)return e.$set(t,"time",i.backTime),!0})}),this.editData=[]},getRawTime:function(t){var e=this,a=null;return this.projectLabel.some(function(i){if(i.taskLists.some(function(i){if(i.id==t)return a=e.getTimeObj(i),!0}),a)return!0}),a},getTimeObj:function(t){var e=t.startdate||t.indate,a=t.enddate||t.indate+86400;return a==e&&(a=Math.round(new Date($A.formatDate("Y-m-d 23:59:59",a)).getTime()/1e3)),a=Math.max(a,e+60),{start:e*=1e3,end:a*=1e3}},tapProject:function(t){this.filtrProjectId=$A.runNum(t),this.initData()}}}},496:function(t,e,a){var i=a(2)(a(499),a(500),!1,function(t){a(497)},"data-v-14264178",null);t.exports=i.exports},497:function(t,e,a){var i=a(498);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(1)("6207e54e",i,!0,{})},498:function(t,e,a){(t.exports=a(0)(!1)).push([t.i,'.wook-gantt[data-v-14264178]{position:absolute;top:0;left:0;right:0;bottom:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:self-start;-ms-flex-align:self-start;align-items:self-start;color:#747a81}.wook-gantt [data-v-14264178]{-webkit-box-sizing:border-box;box-sizing:border-box}.wook-gantt .gantt-left[data-v-14264178]{-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;-ms-flex-negative:0;flex-shrink:0;height:100%;background-color:#fff;position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.wook-gantt .gantt-left[data-v-14264178]:after{content:"";position:absolute;top:0;right:0;bottom:0;width:1px;background-color:rgba(237,241,242,.75)}.wook-gantt .gantt-left .gantt-title[data-v-14264178]{height:76px;-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;-ms-flex-negative:0;flex-shrink:0;background-color:#f9fafb;padding-left:12px;overflow:hidden}.wook-gantt .gantt-left .gantt-title .gantt-title-text[data-v-14264178]{line-height:100px;max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:600}.wook-gantt .gantt-left .gantt-item[data-v-14264178]{-webkit-transform:translateZ(0);transform:translateZ(0);max-height:100%;overflow:auto;-ms-overflow-style:none}.wook-gantt .gantt-left .gantt-item[data-v-14264178]::-webkit-scrollbar{display:none}.wook-gantt .gantt-left .gantt-item>li[data-v-14264178]{height:40px;border-bottom:1px solid rgba(237,241,242,.75);position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.wook-gantt .gantt-left .gantt-item>li:hover .item-icon[data-v-14264178]{display:-webkit-box;display:-ms-flexbox;display:flex}.wook-gantt .gantt-left .gantt-item>li .item-title[data-v-14264178]{-webkit-box-flex:1;-ms-flex:1;flex:1;padding:0 12px;cursor:default;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wook-gantt .gantt-left .gantt-item>li .item-icon[data-v-14264178]{display:none;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:32px;margin-right:2px;font-size:16px;color:#888}.wook-gantt .gantt-right[data-v-14264178]{-webkit-box-flex:1;-ms-flex:1;flex:1;height:100%;background-color:#fff;position:relative;overflow:hidden}.wook-gantt .gantt-right .gantt-chart[data-v-14264178]{position:absolute;top:0;left:0;right:0;bottom:0;-webkit-transform:translateZ(0);transform:translateZ(0)}.wook-gantt .gantt-right .gantt-chart .gantt-month[data-v-14264178]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:absolute;top:0;left:0;right:0;z-index:1;height:26px;line-height:20px;font-size:14px;background-color:#f9fafb}.wook-gantt .gantt-right .gantt-chart .gantt-month>li[data-v-14264178]{-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;-ms-flex-negative:0;flex-shrink:0;height:100%;position:relative;overflow:hidden}.wook-gantt .gantt-right .gantt-chart .gantt-month>li[data-v-14264178]:after{content:"";position:absolute;top:0;right:0;width:1px;height:100%;background-color:rgba(237,241,242,.75)}.wook-gantt .gantt-right .gantt-chart .gantt-month>li .month-format[data-v-14264178]{overflow:hidden;white-space:nowrap;padding:6px 6px 0}.wook-gantt .gantt-right .gantt-chart .gantt-date[data-v-14264178]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:absolute;top:26px;left:0;right:0;bottom:0;z-index:2;cursor:move}.wook-gantt .gantt-right .gantt-chart .gantt-date[data-v-14264178]:before{content:"";position:absolute;top:0;left:0;right:0;height:50px;background-color:#f9fafb}.wook-gantt .gantt-right .gantt-chart .gantt-date>li[data-v-14264178]{-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;-ms-flex-negative:0;flex-shrink:0;height:100%;position:relative;overflow:hidden}.wook-gantt .gantt-right .gantt-chart .gantt-date>li[data-v-14264178]:after{content:"";position:absolute;top:0;right:0;width:1px;height:100%;background-color:rgba(237,241,242,.75)}.wook-gantt .gantt-right .gantt-chart .gantt-date>li .date-format[data-v-14264178]{overflow:hidden;white-space:nowrap;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;height:44px}.wook-gantt .gantt-right .gantt-chart .gantt-date>li .date-format .format-day[data-v-14264178]{line-height:28px;font-size:18px}.wook-gantt .gantt-right .gantt-chart .gantt-date>li .date-format .format-wook[data-v-14264178]{line-height:16px;font-weight:300;font-size:13px}.wook-gantt .gantt-right .gantt-chart .gantt-timeline[data-v-14264178]{position:absolute;top:76px;left:0;right:0;bottom:0;z-index:3;overflow-x:hidden;overflow-y:auto}.wook-gantt .gantt-right .gantt-chart .gantt-timeline>li[data-v-14264178]{cursor:default;height:40px;border-bottom:1px solid rgba(237,241,242,.75);position:relative}.wook-gantt .gantt-right .gantt-chart .gantt-timeline>li .timeline-item[data-v-14264178]{position:absolute;top:0;-ms-touch-action:none;touch-action:none;pointer-events:auto;padding:4px;margin-top:4px;background:#e74c3c;border-radius:18px;color:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;will-change:contents;height:32px}.wook-gantt .gantt-right .gantt-chart .gantt-timeline>li .timeline-item .timeline-title[data-v-14264178]{-ms-touch-action:none;touch-action:none;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-left:4px;margin-right:10px}.wook-gantt .gantt-right .gantt-chart .gantt-timeline>li .timeline-item .timeline-resizer[data-v-14264178]{height:22px;-ms-touch-action:none;touch-action:none;width:8px;background:hsla(0,0%,100%,.1);cursor:ew-resize;-ms-flex-negative:0;flex-shrink:0;will-change:visibility;position:absolute;top:5px;right:5px}',""])},499:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default={name:"GanttView",props:{lists:{type:Array},menuWidth:{type:Number,default:300},itemWidth:{type:Number,default:100}},data:function(){return{mouseType:"",mouseWidth:0,mouseScaleWidth:0,dateWidth:100,ganttWidth:0,mouseItem:null,mouseBak:{},dateMove:null}},mounted:function(){this.dateWidth=this.itemWidth,this.$refs.ganttRight.addEventListener("mousewheel",this.handleScroll,!1),document.addEventListener("mousemove",this.itemMouseMove),document.addEventListener("mouseup",this.itemMouseUp),window.addEventListener("resize",this.handleResize,!1),this.handleResize()},beforeDestroy:function(){this.$refs.ganttRight.removeEventListener("mousewheel",this.handleScroll,!1),document.removeEventListener("mousemove",this.itemMouseMove),document.removeEventListener("mouseup",this.itemMouseUp),window.removeEventListener("resize",this.handleResize,!1)},watch:{itemWidth:function(t){this.dateWidth=t}},computed:{monthNum:function(){var t=this.ganttWidth,e=this.dateWidth;return Math.floor(t/e/30)+2},monthStyle:function(){var t=this.mouseWidth,e=this.dateWidth;return function(a){var i=0==t?0:t/e,o=new Date,s=new Date(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0),n=new Date(s.getTime()+864e5*i),r=new Date(n.getFullYear(),n.getMonth()+1,0,23,59,59),l=e*((r-n)/1e3/60/60/24);return a>0&&(l=(r=new Date(n.getFullYear(),n.getMonth()+1+a,0)).getDate()*e),{width:l+"px"}}},monthFormat:function(){var t=this.mouseWidth,e=this.dateWidth;return function(a){var i=0==t?0:t/e,o=new Date,s=new Date(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0),n=new Date(s.getTime()+864e5*i);return a>0&&(n=new Date(n.getFullYear(),n.getMonth()+1+a,0)),$A.formatDate("Y-m",n)}},dateNum:function(){var t=this.ganttWidth,e=this.dateWidth;return Math.floor(t/e)+2},dateStyle:function(){var t=this.mouseWidth,e=this.dateWidth;return function(a){var i={},o=0==t?0:t/e,s=Math.floor(o)+a;o==Math.floor(o)&&s--;var n=0==t?a-1:s,r=new Date((new Date).getTime()+864e5*n);-1!==[0,6].indexOf(r.getDay())&&(i.backgroundColor="#f9fafb");var l=e;return 0==a&&(l=Math.abs((t%l-l)%l)),i.width=l+"px",i}},dateFormat:function(){var t=this.mouseWidth,e=this.dateWidth;return function(a,i){var o=0==t?0:t/e,s=Math.floor(o)+a;o==Math.floor(o)&&s--;var n=0==t?a-1:s,r=new Date((new Date).getTime()+864e5*n);return"day"==i?r.getDate():"wook"==i?this.$L("星期"+"日一二三四五六".charAt(r.getDay())):r}},itemStyle:function(){var t=this.mouseWidth,e=this.dateWidth,a=this.ganttWidth;return function(o){var s=o.time,n=s.start,r=s.end,l=o.style,c=o.moveX,d=o.moveW,p=new Date,u=new Date(p.getFullYear(),p.getMonth(),p.getDate(),0,0,0).getTime(),f=(n-u)/1e3/60/60/24,m=e*f+-1*t,h=e*((r-u)/1e3/60/60/24-f);"number"==typeof c&&(m+=c),"number"==typeof d&&(h+=d);var b={left:Math.min(Math.max(m,-1.2*h),1.2*a).toFixed(2)+"px",width:h.toFixed(2)+"px"};return m<0&&Math.abs(m)<h&&(b.paddingLeft=Math.abs(m).toFixed(2)+"px"),m+h>a&&m<a&&(b.paddingRight=Math.abs(m+h-a).toFixed(2)+"px"),"object"===(void 0===l?"undefined":i(l))?Object.assign(b,l):b}}},methods:{itemScrollListener:function(t){"timeline"!=this.mouseType&&(this.$refs.ganttTimeline.scrollTop=t.target.scrollTop)},timelineScrollListener:function(t){"item"!=this.mouseType&&(this.$refs.ganttItem.scrollTop=t.target.scrollTop)},handleScroll:function(t){if(t.preventDefault(),t.ctrlKey)return this.dateWidth=Math.min(600,Math.max(24,this.dateWidth-Math.floor(t.deltaY))),void(this.mouseWidth=this.ganttWidth/2*((this.dateWidth-100)/100)+this.dateWidth/100*this.mouseScaleWidth);if(0!=t.deltaY){var e=this.$refs.ganttTimeline,a=e.scrollTop+t.deltaY;a<0?a=0:a>e.scrollHeight-e.clientHeight&&(a=e.scrollHeight-e.clientHeight),e.scrollTop!=a&&(this.mouseType="timeline",e.scrollTop=a)}0!=t.deltaX&&(this.mouseWidth+=t.deltaX,this.mouseScaleWidth+=t.deltaX*(100/this.dateWidth))},handleResize:function(){this.ganttWidth=this.$refs.ganttTimeline.clientWidth},dateMouseDown:function(t){t.preventDefault(),this.mouseItem=null,this.dateMove={clientX:t.clientX}},itemMouseDown:function(t,e){t.preventDefault();var a="moveX";"timeline-resizer"==t.target.className&&(a="moveW"),"number"!=typeof e[a]&&this.$set(e,a,0),this.mouseBak={type:a,clientX:t.clientX,value:e[a]},this.mouseItem=e,this.dateMove=null},itemMouseMove:function(t){if(null!=this.mouseItem){t.preventDefault();var e=t.clientX-this.mouseBak.clientX;this.$set(this.mouseItem,this.mouseBak.type,this.mouseBak.value+e)}else if(null!=this.dateMove){t.preventDefault();var a=5*(this.dateMove.clientX-t.clientX);this.dateMove.clientX=t.clientX,this.mouseWidth+=a,this.mouseScaleWidth+=a*(100/this.dateWidth)}},itemMouseUp:function(t){if(null!=this.mouseItem){var e=this.mouseItem.time,a=e.start,i=e.end,o=!1,s=864e5/this.dateWidth;if("number"==typeof this.mouseItem.moveX&&0!=this.mouseItem.moveX){var n=this.mouseItem.moveX*s;this.$set(this.mouseItem.time,"start",a+n),this.$set(this.mouseItem.time,"end",i+n),this.$set(this.mouseItem,"moveX",0),o=!0}if("number"==typeof this.mouseItem.moveW&&0!=this.mouseItem.moveW){var r=this.mouseItem.moveW*s;this.$set(this.mouseItem.time,"end",i+r),this.$set(this.mouseItem,"moveW",0),o=!0}o?this.$emit("on-change",this.mouseItem):"timeline-title"==t.target.className&&this.clickItem(this.mouseItem),this.mouseItem=null}else null!=this.dateMove&&(this.dateMove=null)},scrollPosition:function(t){var e=new Date,a=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0),i=864e5/this.dateWidth,o=(this.lists[t].time.start-a)/i-this.dateWidth-this.mouseWidth;this.mouseWidth+=o,this.mouseScaleWidth+=o*(100/this.dateWidth)},clickItem:function(t){this.$emit("on-click",t)}}}},500:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wook-gantt"},[a("div",{staticClass:"gantt-left",style:{width:t.menuWidth+"px"}},[a("div",{staticClass:"gantt-title"},[a("div",{staticClass:"gantt-title-text"},[t._v(t._s(t.$L("任务名称")))])]),t._v(" "),a("ul",{ref:"ganttItem",staticClass:"gantt-item",on:{scroll:t.itemScrollListener,mouseenter:function(e){t.mouseType="item"}}},t._l(t.lists,function(e,i){return a("li",{key:i},[a("div",{staticClass:"item-title",on:{click:function(a){return t.clickItem(e)}}},[t._v(t._s(e.label))]),t._v(" "),a("Icon",{staticClass:"item-icon",attrs:{type:"ios-locate-outline"},on:{click:function(e){return t.scrollPosition(i)}}})],1)}),0)]),t._v(" "),a("div",{ref:"ganttRight",staticClass:"gantt-right"},[a("div",{staticClass:"gantt-chart"},[a("ul",{staticClass:"gantt-month"},t._l(t.monthNum,function(e,i){return a("li",{key:i,style:t.monthStyle(i)},[a("div",{staticClass:"month-format"},[t._v(t._s(t.monthFormat(i)))])])}),0),t._v(" "),a("ul",{staticClass:"gantt-date",on:{mousedown:t.dateMouseDown}},t._l(t.dateNum,function(e,i){return a("li",{key:i,style:t.dateStyle(i)},[a("div",{staticClass:"date-format"},[a("div",{staticClass:"format-day"},[t._v(t._s(t.dateFormat(i,"day")))]),t._v(" "),t.dateWidth>46?a("div",{staticClass:"format-wook"},[t._v(t._s(t.dateFormat(i,"wook")))]):t._e()])])}),0),t._v(" "),a("ul",{ref:"ganttTimeline",staticClass:"gantt-timeline",on:{scroll:t.timelineScrollListener,mouseenter:function(e){t.mouseType="timeline"}}},t._l(t.lists,function(e,i){return a("li",{key:i},[a("div",{staticClass:"timeline-item",style:t.itemStyle(e),on:{mousedown:function(a){return t.itemMouseDown(a,e)}}},[a("div",{staticClass:"timeline-title"},[t._v(t._s(e.label))]),t._v(" "),a("div",{staticClass:"timeline-resizer"})])])}),0)])])])},staticRenderFns:[]}},501:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"project-gstc-gantt"},[a("GanttView",{attrs:{lists:t.lists,menuWidth:t.windowMax768?180:260,itemWidth:80},on:{"on-change":t.updateTime,"on-click":t.clickItem}}),t._v(" "),a("Dropdown",{staticClass:"project-gstc-dropdown-filtr",style:t.windowMax768?{left:"142px"}:{},on:{"on-click":t.tapProject}},[a("Icon",{staticClass:"project-gstc-dropdown-icon",class:{filtr:t.filtrProjectId>0},attrs:{type:"md-funnel"}}),t._v(" "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{class:{"dropdown-active":0==t.filtrProjectId},attrs:{name:0}},[t._v(t._s(t.$L("全部")))]),t._v(" "),t._l(t.projectLabel,function(e,i){return a("DropdownItem",{key:i,class:{"dropdown-active":t.filtrProjectId==e.id},attrs:{name:e.id}},[t._v(t._s(e.title)+" ("+t._s(e.taskLists.length)+")")])})],2)],1),t._v(" "),a("div",{staticClass:"project-gstc-close",on:{click:function(e){return t.$emit("on-close")}}},[a("Icon",{attrs:{type:"md-close"}})],1),t._v(" "),a("div",{staticClass:"project-gstc-edit",class:{info:t.editShowInfo,visible:t.editData.length>0}},[a("div",{staticClass:"project-gstc-edit-info"},[a("Table",{staticClass:"tableFill",attrs:{size:"small","max-height":"600",columns:t.editColumns,data:t.editData}}),t._v(" "),a("div",{staticClass:"project-gstc-edit-btns"},[a("Button",{attrs:{loading:t.editLoad>0,size:"small",type:"text"},on:{click:function(e){return t.editSubmit(!1)}}},[t._v(t._s(t.$L("取消")))]),t._v(" "),a("Button",{attrs:{loading:t.editLoad>0,size:"small",type:"primary"},on:{click:function(e){return t.editSubmit(!0)}}},[t._v(t._s(t.$L("保存")))]),t._v(" "),a("Icon",{staticClass:"zoom",attrs:{type:"md-arrow-dropright"},on:{click:function(e){t.editShowInfo=!1}}})],1)],1),t._v(" "),a("div",{staticClass:"project-gstc-edit-small"},[a("div",{staticClass:"project-gstc-edit-text",on:{click:function(e){t.editShowInfo=!0}}},[t._v(t._s(t.$L("未保存计划时间"))+": "+t._s(t.editData.length))]),t._v(" "),a("Button",{attrs:{loading:t.editLoad>0,size:"small",type:"text"},on:{click:function(e){return t.editSubmit(!1)}}},[t._v(t._s(t.$L("取消")))]),t._v(" "),a("Button",{attrs:{loading:t.editLoad>0,size:"small",type:"primary"},on:{click:function(e){return t.editSubmit(!0)}}},[t._v(t._s(t.$L("保存")))])],1)])],1)},staticRenderFns:[]}},502:function(t,e,a){var i=a(2)(a(505),a(506),!1,function(t){a(503)},"data-v-4bcf350c",null);t.exports=i.exports},503:function(t,e,a){var i=a(504);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(1)("322b8864",i,!0,{})},504:function(t,e,a){(t.exports=a(0)(!1)).push([t.i,".project-setting[data-v-4bcf350c]{padding:0 12px}.project-setting .project-setting-title[data-v-4bcf350c]{padding:12px;font-size:14px;font-weight:600}.project-setting .project-setting-group[data-v-4bcf350c]{display:inline-block}.project-setting .form-placeholder[data-v-4bcf350c]{font-size:12px;color:#999}.project-setting .form-placeholder[data-v-4bcf350c]:hover{color:#000}",""])},505:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(7),o=a.n(i);e.default={name:"ProjectSetting",components:{DrawerTabsContainer:o.a},props:{projectid:{default:0},canload:{type:Boolean,default:!0}},data:function(){return{loadYet:!1,loadIng:0,formSystem:{}}},mounted:function(){this.canload&&(this.loadYet=!0,this.getSetting())},watch:{projectid:function(){this.loadYet&&this.getSetting()},canload:function(t){t&&!this.loadYet&&(this.loadYet=!0,this.getSetting())}},methods:{getSetting:function(t){var e=this;this.loadIng++,$A.apiAjax({url:"project/setting?act="+(t?"save":"get"),data:Object.assign(this.formSystem,{projectid:this.projectid}),complete:function(){e.loadIng--},success:function(a){1===a.ret?(e.formSystem=a.data,e.formSystem__reset=$A.cloneData(e.formSystem),t&&(e.$Message.success(e.$L("修改成功")),e.$emit("on-change",a.data))):t&&e.$Modal.error({title:e.$L("温馨提示"),content:a.msg})}})},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(a){if(a)switch(t){case"formSystem":e.getSetting(!0)}})},handleReset:function(t){void 0===this[t+"__reset"]?this.$refs[t].resetFields():this[t]=$A.cloneData(this[t+"__reset"])}}}},506:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drawer-tabs-container",[a("div",{staticClass:"project-setting"},[a("Form",{ref:"formSystem",attrs:{model:t.formSystem,"label-width":110},nativeOn:{submit:function(t){t.preventDefault()}}},[a("div",{staticClass:"project-setting-title"},[t._v(t._s(t.$L("项目信息"))+":")]),t._v(" "),a("FormItem",{attrs:{label:t.$L("项目简介")}},[a("Input",{staticStyle:{"max-width":"450px"},attrs:{type:"textarea",autosize:{minRows:3,maxRows:20}},model:{value:t.formSystem.project_desc,callback:function(e){t.$set(t.formSystem,"project_desc",e)},expression:"formSystem.project_desc"}})],1),t._v(" "),a("div",{staticClass:"project-setting-title"},[t._v(t._s(t.$L("项目权限"))+":")]),t._v(" "),a("FormItem",{attrs:{prop:"project_role_export"}},[a("div",{attrs:{slot:"label"},slot:"label"},[a("Tooltip",{attrs:{content:t.$L("任务列表导出Excel"),transfer:""}},[t._v(t._s(t.$L("导出列表")))])],1),t._v(" "),a("Checkbox",{attrs:{value:!0,disabled:""}},[t._v(t._s(t.$L("项目负责人")))]),t._v(" "),a("CheckboxGroup",{staticClass:"project-setting-group",model:{value:t.formSystem.project_role_export,callback:function(e){t.$set(t.formSystem,"project_role_export",e)},expression:"formSystem.project_role_export"}},[a("Checkbox",{attrs:{label:"member"}},[t._v(t._s(t.$L("项目成员")))])],1)],1),t._v(" "),a("div",{staticClass:"project-setting-title"},[t._v(t._s(t.$L("任务权限"))+":")]),t._v(" "),a("FormItem",{attrs:{label:t.$L("添加任务")}},[a("Checkbox",{attrs:{value:!0,disabled:""}},[t._v(t._s(t.$L("项目负责人")))]),t._v(" "),a("CheckboxGroup",{staticClass:"project-setting-group",model:{value:t.formSystem.add_role,callback:function(e){t.$set(t.formSystem,"add_role",e)},expression:"formSystem.add_role"}},[a("Checkbox",{attrs:{label:"member"}},[t._v(t._s(t.$L("项目成员")))])],1)],1),t._v(" "),a("FormItem",{attrs:{label:t.$L("修改任务")}},[a("Checkbox",{attrs:{value:!0,disabled:""}},[t._v(t._s(t.$L("项目负责人")))]),t._v(" "),a("CheckboxGroup",{staticClass:"project-setting-group",model:{value:t.formSystem.edit_role,callback:function(e){t.$set(t.formSystem,"edit_role",e)},expression:"formSystem.edit_role"}},[a("Checkbox",{attrs:{label:"owner"}},[t._v(t._s(t.$L("任务负责人")))]),t._v(" "),a("Checkbox",{attrs:{label:"member"}},[t._v(t._s(t.$L("项目成员")))])],1)],1),t._v(" "),a("FormItem",{attrs:{label:t.$L("标记完成")}},[a("Checkbox",{attrs:{value:!0,disabled:""}},[t._v(t._s(t.$L("项目负责人")))]),t._v(" "),a("CheckboxGroup",{staticClass:"project-setting-group",model:{value:t.formSystem.complete_role,callback:function(e){t.$set(t.formSystem,"complete_role",e)},expression:"formSystem.complete_role"}},[a("Checkbox",{attrs:{label:"owner"}},[t._v(t._s(t.$L("任务负责人")))]),t._v(" "),a("Checkbox",{attrs:{label:"member"}},[t._v(t._s(t.$L("项目成员")))])],1)],1),t._v(" "),a("FormItem",{attrs:{label:t.$L("归档任务")}},[a("Checkbox",{attrs:{value:!0,disabled:""}},[t._v(t._s(t.$L("项目负责人")))]),t._v(" "),a("CheckboxGroup",{staticClass:"project-setting-group",model:{value:t.formSystem.archived_role,callback:function(e){t.$set(t.formSystem,"archived_role",e)},expression:"formSystem.archived_role"}},[a("Checkbox",{attrs:{label:"owner"}},[t._v(t._s(t.$L("任务负责人")))]),t._v(" "),a("Checkbox",{attrs:{label:"member"}},[t._v(t._s(t.$L("项目成员")))])],1)],1),t._v(" "),a("FormItem",{attrs:{label:t.$L("删除任务")}},[a("Checkbox",{attrs:{value:!0,disabled:""}},[t._v(t._s(t.$L("项目负责人")))]),t._v(" "),a("CheckboxGroup",{staticClass:"project-setting-group",model:{value:t.formSystem.del_role,callback:function(e){t.$set(t.formSystem,"del_role",e)},expression:"formSystem.del_role"}},[a("Checkbox",{attrs:{label:"owner"}},[t._v(t._s(t.$L("任务负责人")))]),t._v(" "),a("Checkbox",{attrs:{label:"member"}},[t._v(t._s(t.$L("项目成员")))])],1)],1),t._v(" "),a("div",{staticClass:"project-setting-title"},[t._v(t._s(t.$L("面板显示"))+":")]),t._v(" "),a("FormItem",{attrs:{label:t.$L("显示已完成")}},[a("div",[a("RadioGroup",{model:{value:t.formSystem.complete_show,callback:function(e){t.$set(t.formSystem,"complete_show",e)},expression:"formSystem.complete_show"}},[a("Radio",{attrs:{label:"show"}},[t._v(t._s(t.$L("显示")))]),t._v(" "),a("Radio",{attrs:{label:"hide"}},[t._v(t._s(t.$L("隐藏")))])],1)],1),t._v(" "),"show"==t.formSystem.complete_show?a("div",{staticClass:"form-placeholder"},[t._v("\n                    "+t._s(t.$L("项目面板显示已完成的任务。"))+"\n                ")]):a("div",{staticClass:"form-placeholder"},[t._v("\n                    "+t._s(t.$L("项目面板隐藏已完成的任务。"))+"\n                ")])]),t._v(" "),a("FormItem",[a("Button",{attrs:{loading:t.loadIng>0,type:"primary"},on:{click:function(e){return t.handleSubmit("formSystem")}}},[t._v(t._s(t.$L("提交")))]),t._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{loading:t.loadIng>0},on:{click:function(e){return t.handleReset("formSystem")}}},[t._v(t._s(t.$L("重置")))])],1)],1)],1)])},staticRenderFns:[]}},507:function(t,e,a){var i=a(508),o=a(16);t.exports=function(t,e,a,s){return null==t?[]:(o(e)||(e=null==e?[]:[e]),o(a=s?void 0:a)||(a=null==a?[]:[a]),i(t,e,a))}},508:function(t,e,a){var i=a(379),o=a(314),s=a(514),n=a(536),r=a(542),l=a(20),c=a(543),d=a(385),p=a(16);t.exports=function(t,e,a){e=e.length?i(e,function(t){return p(t)?function(e){return o(e,1===t.length?t[0]:t)}:t}):[d];var u=-1;e=i(e,l(s));var f=n(t,function(t,a,o){return{criteria:i(e,function(e){return e(t)}),index:++u,value:t}});return r(f,function(t,e){return c(t,e,a)})}},509:function(t,e,a){var i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,s=a(510)(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,function(t,a,i,s){e.push(i?s.replace(o,"$1"):a||t)}),e});t.exports=s},510:function(t,e,a){var i=a(511),o=500;t.exports=function(t){var e=i(t,function(t){return a.size===o&&a.clear(),t}),a=e.cache;return e}},511:function(t,e,a){var i=a(54),o="Expected a function";function s(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(o);var a=function(){var i=arguments,o=e?e.apply(this,i):i[0],s=a.cache;if(s.has(o))return s.get(o);var n=t.apply(this,i);return a.cache=s.set(o,n)||s,n};return a.cache=new(s.Cache||i),a}s.Cache=i,t.exports=s},512:function(t,e,a){var i=a(513);t.exports=function(t){return null==t?"":i(t)}},513:function(t,e,a){var i=a(18),o=a(379),s=a(16),n=a(282),r=1/0,l=i?i.prototype:void 0,c=l?l.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(s(e))return o(e,t)+"";if(n(e))return c?c.call(e):"";var a=e+"";return"0"==a&&1/e==-r?"-0":a}},514:function(t,e,a){var i=a(515),o=a(528),s=a(385),n=a(16),r=a(533);t.exports=function(t){return"function"==typeof t?t:null==t?s:"object"==typeof t?n(t)?o(t[0],t[1]):i(t):r(t)}},515:function(t,e,a){var i=a(516),o=a(527),s=a(384);t.exports=function(t){var e=o(t);return 1==e.length&&e[0][2]?s(e[0][0],e[0][1]):function(a){return a===t||i(a,t,e)}}},516:function(t,e,a){var i=a(55),o=a(381),s=1,n=2;t.exports=function(t,e,a,r){var l=a.length,c=l,d=!r;if(null==t)return!c;for(t=Object(t);l--;){var p=a[l];if(d&&p[2]?p[1]!==t[p[0]]:!(p[0]in t))return!1}for(;++l<c;){var u=(p=a[l])[0],f=t[u],m=p[1];if(d&&p[2]){if(void 0===f&&!(u in t))return!1}else{var h=new i;if(r)var b=r(f,m,u,t,e,h);if(!(void 0===b?o(m,f,s|n,r,h):b))return!1}}return!0}},517:function(t,e,a){var i=a(55),o=a(382),s=a(523),n=a(526),r=a(21),l=a(16),c=a(34),d=a(63),p=1,u="[object Arguments]",f="[object Array]",m="[object Object]",h=Object.prototype.hasOwnProperty;t.exports=function(t,e,a,b,g,v){var x=l(t),k=l(e),w=x?f:r(t),j=k?f:r(e),_=(w=w==u?m:w)==m,y=(j=j==u?m:j)==m,$=w==j;if($&&c(t)){if(!c(e))return!1;x=!0,_=!1}if($&&!_)return v||(v=new i),x||d(t)?o(t,e,a,b,g,v):s(t,e,w,a,b,g,v);if(!(a&p)){var L=_&&h.call(t,"__wrapped__"),D=y&&h.call(e,"__wrapped__");if(L||D){var T=L?t.value():t,S=D?e.value():e;return v||(v=new i),g(T,S,a,b,v)}}return!!$&&(v||(v=new i),n(t,e,a,b,g,v))}},518:function(t,e,a){var i=a(54),o=a(519),s=a(520);function n(t){var e=-1,a=null==t?0:t.length;for(this.__data__=new i;++e<a;)this.add(t[e])}n.prototype.add=n.prototype.push=o,n.prototype.has=s,t.exports=n},519:function(t,e){var a="__lodash_hash_undefined__";t.exports=function(t){return this.__data__.set(t,a),this}},520:function(t,e){t.exports=function(t){return this.__data__.has(t)}},521:function(t,e){t.exports=function(t,e){for(var a=-1,i=null==t?0:t.length;++a<i;)if(e(t[a],a,t))return!0;return!1}},522:function(t,e){t.exports=function(t,e){return t.has(e)}},523:function(t,e,a){var i=a(18),o=a(59),s=a(33),n=a(382),r=a(524),l=a(525),c=1,d=2,p="[object Boolean]",u="[object Date]",f="[object Error]",m="[object Map]",h="[object Number]",b="[object RegExp]",g="[object Set]",v="[object String]",x="[object Symbol]",k="[object ArrayBuffer]",w="[object DataView]",j=i?i.prototype:void 0,_=j?j.valueOf:void 0;t.exports=function(t,e,a,i,j,y,$){switch(a){case w:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case k:return!(t.byteLength!=e.byteLength||!y(new o(t),new o(e)));case p:case u:case h:return s(+t,+e);case f:return t.name==e.name&&t.message==e.message;case b:case v:return t==e+"";case m:var L=r;case g:var D=i&c;if(L||(L=l),t.size!=e.size&&!D)return!1;var T=$.get(t);if(T)return T==e;i|=d,$.set(t,e);var S=n(L(t),L(e),i,j,y,$);return $.delete(t),S;case x:if(_)return _.call(t)==_.call(e)}return!1}},524:function(t,e){t.exports=function(t){var e=-1,a=Array(t.size);return t.forEach(function(t,i){a[++e]=[i,t]}),a}},525:function(t,e){t.exports=function(t){var e=-1,a=Array(t.size);return t.forEach(function(t){a[++e]=t}),a}},526:function(t,e,a){var i=a(60),o=1,s=Object.prototype.hasOwnProperty;t.exports=function(t,e,a,n,r,l){var c=a&o,d=i(t),p=d.length;if(p!=i(e).length&&!c)return!1;for(var u=p;u--;){var f=d[u];if(!(c?f in e:s.call(e,f)))return!1}var m=l.get(t),h=l.get(e);if(m&&h)return m==e&&h==t;var b=!0;l.set(t,e),l.set(e,t);for(var g=c;++u<p;){var v=t[f=d[u]],x=e[f];if(n)var k=c?n(x,v,f,e,t,l):n(v,x,f,t,e,l);if(!(void 0===k?v===x||r(v,x,a,n,l):k)){b=!1;break}g||(g="constructor"==f)}if(b&&!g){var w=t.constructor,j=e.constructor;w!=j&&"constructor"in t&&"constructor"in e&&!("function"==typeof w&&w instanceof w&&"function"==typeof j&&j instanceof j)&&(b=!1)}return l.delete(t),l.delete(e),b}},527:function(t,e,a){var i=a(383),o=a(19);t.exports=function(t){for(var e=o(t),a=e.length;a--;){var s=e[a],n=t[s];e[a]=[s,n,i(n)]}return e}},528:function(t,e,a){var i=a(381),o=a(529),s=a(530),n=a(315),r=a(383),l=a(384),c=a(283),d=1,p=2;t.exports=function(t,e){return n(t)&&r(e)?l(c(t),e):function(a){var n=o(a,t);return void 0===n&&n===e?s(a,t):i(e,n,d|p)}}},529:function(t,e,a){var i=a(314);t.exports=function(t,e,a){var o=null==t?void 0:i(t,e);return void 0===o?a:o}},530:function(t,e,a){var i=a(531),o=a(532);t.exports=function(t,e){return null!=t&&o(t,e,i)}},531:function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},532:function(t,e,a){var i=a(380),o=a(61),s=a(16),n=a(62),r=a(35),l=a(283);t.exports=function(t,e,a){for(var c=-1,d=(e=i(e,t)).length,p=!1;++c<d;){var u=l(e[c]);if(!(p=null!=t&&a(t,u)))break;t=t[u]}return p||++c!=d?p:!!(d=null==t?0:t.length)&&r(d)&&n(u,d)&&(s(t)||o(t))}},533:function(t,e,a){var i=a(534),o=a(535),s=a(315),n=a(283);t.exports=function(t){return s(t)?i(n(t)):o(t)}},534:function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},535:function(t,e,a){var i=a(314);t.exports=function(t){return function(e){return i(e,t)}}},536:function(t,e,a){var i=a(537),o=a(32);t.exports=function(t,e){var a=-1,s=o(t)?Array(t.length):[];return i(t,function(t,i,o){s[++a]=e(t,i,o)}),s}},537:function(t,e,a){var i=a(538),o=a(541)(i);t.exports=o},538:function(t,e,a){var i=a(539),o=a(19);t.exports=function(t,e){return t&&i(t,e,o)}},539:function(t,e,a){var i=a(540)();t.exports=i},540:function(t,e){t.exports=function(t){return function(e,a,i){for(var o=-1,s=Object(e),n=i(e),r=n.length;r--;){var l=n[t?r:++o];if(!1===a(s[l],l,s))break}return e}}},541:function(t,e,a){var i=a(32);t.exports=function(t,e){return function(a,o){if(null==a)return a;if(!i(a))return t(a,o);for(var s=a.length,n=e?s:-1,r=Object(a);(e?n--:++n<s)&&!1!==o(r[n],n,r););return a}}},542:function(t,e){t.exports=function(t,e){var a=t.length;for(t.sort(e);a--;)t[a]=t[a].value;return t}},543:function(t,e,a){var i=a(544);t.exports=function(t,e,a){for(var o=-1,s=t.criteria,n=e.criteria,r=s.length,l=a.length;++o<r;){var c=i(s[o],n[o]);if(c)return o>=l?c:c*("desc"==a[o]?-1:1)}return t.index-e.index}},544:function(t,e,a){var i=a(282);t.exports=function(t,e){if(t!==e){var a=void 0!==t,o=null===t,s=t==t,n=i(t),r=void 0!==e,l=null===e,c=e==e,d=i(e);if(!l&&!d&&!n&&t>e||n&&r&&c&&!l&&!d||o&&r&&c||!a&&c||!s)return 1;if(!o&&!n&&!d&&t<e||d&&a&&s&&!o&&!n||l&&a&&s||!r&&s||!c)return-1}return 0}},545:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w-main project-panel"},[a("v-title",[t._v(t._s(t.$L("项目面板"))+"-"+t._s(t.$L("轻量级的团队在线协作")))]),t._v(" "),a("div",{staticClass:"w-nav"},[a("div",{staticClass:"nav-row"},[a("div",{staticClass:"w-nav-left"},[a("div",{staticClass:"page-nav-left"},[a("span",{staticClass:"bold"},[t._v(t._s(t.projectDetail.title))]),t._v(" "),t.loadIng>0?a("div",{staticClass:"page-nav-loading"},[a("w-loading")],1):a("div",{staticClass:"page-nav-refresh"},[a("em",{on:{click:function(e){return t.getDetail(!0)}}},[t._v(t._s(t.$L("刷新")))])])])]),t._v(" "),a("div",{staticClass:"w-nav-flex"}),t._v(" "),a("div",{staticClass:"w-nav-right"},[a("span",{staticClass:"ft hover",class:{active:""!=t.filtrTask}},[a("Dropdown",{attrs:{transfer:""},on:{"on-click":function(e){t.filtrTask=e}}},[a("Icon",{staticClass:"icon",attrs:{type:"md-funnel"}}),t._v(" "+t._s(t.$L("筛选"))+"\n                        "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{class:{"dropdown-active":""==t.filtrTask},attrs:{name:""}},[t._v(t._s(t.$L("全部任务")))]),t._v(" "),a("DropdownItem",{class:{"dropdown-active":"persons"==t.filtrTask},attrs:{name:"persons"}},[t._v(t._s(t.$L("我负责的任务")))]),t._v(" "),a("DropdownItem",{class:{"dropdown-active":"follower"==t.filtrTask},attrs:{name:"follower"}},[t._v(t._s(t.$L("我关注的任务")))]),t._v(" "),a("DropdownItem",{class:{"dropdown-active":"create"==t.filtrTask},attrs:{name:"create"}},[t._v(t._s(t.$L("我创建的任务")))])],1)],1)],1),t._v(" "),a("span",{staticClass:"m768-show-i"},[a("Dropdown",{attrs:{trigger:"click",transfer:""},on:{"on-click":t.openProjectDrawer}},[a("Icon",{attrs:{type:"md-menu",size:"18"}}),t._v(" "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{attrs:{name:"lists"}},[t._v(t._s(t.$L("列表")))]),t._v(" "),a("DropdownItem",{attrs:{name:"projectGanttShow"}},[t._v(t._s(t.$L("甘特图")))]),t._v(" "),a("DropdownItem",{attrs:{name:"files"}},[t._v(t._s(t.$L("文件")))]),t._v(" "),a("DropdownItem",{attrs:{name:"logs"}},[t._v(t._s(t.$L("动态")))]),t._v(" "),a("DropdownItem",{attrs:{name:"openProjectSettingDrawer"}},[t._v(t._s(t.$L("设置")))])],1)],1)],1),t._v(" "),a("span",{staticClass:"m768-hide-i"},[a("span",{staticClass:"ft hover",on:{click:function(e){return t.openProjectDrawer("lists")}}},[a("i",{staticClass:"ft icon"},[t._v("")]),t._v(" "+t._s(t.$L("列表")))]),t._v(" "),a("span",{staticClass:"ft hover",class:{active:t.projectGanttShow},on:{click:function(e){t.projectGanttShow=!t.projectGanttShow}}},[a("i",{staticClass:"ft icon"},[t._v("")]),t._v(" "+t._s(t.$L("甘特图")))]),t._v(" "),a("span",{staticClass:"ft hover",on:{click:function(e){return t.openProjectDrawer("files")}}},[a("i",{staticClass:"ft icon"},[t._v("")]),t._v(" "+t._s(t.$L("文件")))]),t._v(" "),a("span",{staticClass:"ft hover",on:{click:function(e){return t.openProjectDrawer("logs")}}},[a("i",{staticClass:"ft icon"},[t._v("")]),t._v(" "+t._s(t.$L("动态")))]),t._v(" "),a("span",{staticClass:"ft hover",on:{click:function(e){return t.openProjectSettingDrawer("setting")}}},[a("i",{staticClass:"ft icon"},[t._v("")]),t._v(" "+t._s(t.$L("设置")))])])])])]),t._v(" "),a("w-content",[a("draggable",{staticClass:"label-box",style:{visibility:t.projectGanttShow?"hidden":"visible"},attrs:{draggable:".label-draggable",animation:150,disabled:t.projectSortDisabled||t.windowMax768},on:{sort:function(e){return t.projectSortUpdate(!0)}},model:{value:t.projectLabel,callback:function(e){t.projectLabel=e},expression:"projectLabel"}},[t._l(t.projectLabel,function(e){return t.projectLabel.length>0?a("div",{key:e.id,staticClass:"label-item label-draggable",class:{"label-scroll":!0===e.hasScroll&&!0!==e.endScroll},on:{mouseenter:function(a){return t.projectMouse(e)}}},[a("div",{staticClass:"label-body"},[a("div",{staticClass:"title-box"},[!0===e.loadIng?a("div",{staticClass:"title-loading"},[a("w-loading")],1):t._e(),t._v(" "),a("h2",[t._v(t._s(e.title))]),t._v(" "),a("Dropdown",{attrs:{trigger:"click",transfer:""},on:{"on-click":function(a){return t.handleLabel(a,e)}}},[a("Icon",{attrs:{type:"ios-more"}}),t._v(" "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("Dropdown-item",{attrs:{name:"refresh"}},[t._v(t._s(t.$L("刷新列表")))]),t._v(" "),a("Dropdown-item",{attrs:{name:"rename"}},[t._v(t._s(t.$L("重命名")))]),t._v(" "),a("Dropdown-item",{attrs:{name:"delete"}},[t._v(t._s(t.$L("删除")))])],1)],1)],1),t._v(" "),a("ScrollerY",{ref:"box_"+e.id,refInFor:!0,staticClass:"task-box",on:{"on-scroll":function(a){return t.projectBoxScroll(a,e)}}},[a("draggable",{staticClass:"task-main",class:[t.filtrTask?"filtr-"+t.filtrTask:""],attrs:{group:"task",draggable:".task-draggable",animation:150,disabled:t.projectSortDisabled||t.windowMax768},on:{sort:function(e){return t.projectSortUpdate(!1)},remove:function(e){return t.projectSortUpdate(!1)}},model:{value:e.taskLists,callback:function(a){t.$set(e,"taskLists",a)},expression:"label.taskLists"}},[t._l(e.taskLists,function(e){return a("div",{key:e.id,staticClass:"task-item task-draggable",class:{"persons-item":t.isPersonsTask(e),"follower-item":t.isFollowerTask(e),"create-item":t.isCreateTask(e)}},[a("div",{staticClass:"task-shadow",class:["p"+e.level,e.complete?"complete":"",e.overdue?"overdue":"",!0===e.isNewtask?"newtask":""],on:{click:function(a){return t.openTaskModal(e)}}},[a("div",{staticClass:"subtask-progress"},[a("em",{style:{width:t.subtaskProgress(e)+"%"}})]),t._v(" "),a("div",{staticClass:"task-title"},[t._v(t._s(e.title)),e.desc?a("Icon",{attrs:{type:"ios-list-box-outline"}}):t._e()],1),t._v(" "),a("div",{staticClass:"task-more"},[e.overdue?a("div",{staticClass:"task-status"},[t._v(t._s(t.$L("已超期")))]):e.complete?a("div",{staticClass:"task-status"},[t._v(t._s(t.$L("已完成")))]):a("div",{staticClass:"task-status"},[t._v(t._s(t.$L("未完成")))]),t._v(" "),a("div",{staticClass:"task-persons",class:{"persons-more":e.persons.length>1}},t._l(e.persons,function(t,e){return a("Tooltip",{key:e,staticClass:"task-userimg",attrs:{content:t.nickname||t.username,transfer:""}},[a("UserImg",{staticClass:"avatar",attrs:{info:t}})],1)}),1)])])])}),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("project-add-task",{ref:"add_"+e.id,refInFor:!0,attrs:{placeholder:t.$L("添加任务至")+'"'+e.title+'"',projectid:e.projectid,labelid:e.id},on:{"on-add-success":function(a){return t.addTaskSuccess(a,e)}}})],1)],2)],1)],1),t._v(" "),a("div",{staticClass:"label-bottom",on:{click:function(a){return t.projectFocus(e)}}},[a("Icon",{staticClass:"label-bottom-icon",attrs:{type:"ios-add"}})],1)]):t._e()}),t._v(" "),t.loadDetailed?a("div",{staticClass:"label-item label-create",attrs:{slot:"footer"},on:{click:t.addLabel},slot:"footer"},[a("div",{staticClass:"label-body"},[a("div",{staticClass:"trigger-box ft hover"},[a("i",{staticClass:"ft icon"},[t._v("")]),t._v(t._s(t.$L("添加一个新列表")))])])]):t._e()],2),t._v(" "),t.projectGanttShow?a("project-gantt",{attrs:{projectLabel:t.projectLabel},on:{"on-close":function(e){t.projectGanttShow=!1}}}):t._e()],1),t._v(" "),a("WDrawer",{attrs:{maxWidth:"1080"},model:{value:t.projectDrawerShow,callback:function(e){t.projectDrawerShow=e},expression:"projectDrawerShow"}},[t.projectDrawerShow?a("Tabs",{model:{value:t.projectDrawerTab,callback:function(e){t.projectDrawerTab=e},expression:"projectDrawerTab"}},[a("TabPane",{attrs:{label:t.$L("任务列表"),name:"lists"}},[a("project-task-lists",{attrs:{canload:t.projectDrawerShow&&"lists"==t.projectDrawerTab,projectid:t.projectid,labelLists:t.projectSimpleLabel}})],1),t._v(" "),a("TabPane",{attrs:{label:t.$L("文件列表"),name:"files"}},[a("project-task-files",{attrs:{canload:t.projectDrawerShow&&"files"==t.projectDrawerTab,projectid:t.projectid}})],1),t._v(" "),a("TabPane",{attrs:{label:t.$L("项目动态"),name:"logs"}},[a("project-task-logs",{attrs:{canload:t.projectDrawerShow&&"logs"==t.projectDrawerTab,projectid:t.projectid}})],1)],1):t._e()],1),t._v(" "),a("WDrawer",{attrs:{maxWidth:"1000"},model:{value:t.projectSettingDrawerShow,callback:function(e){t.projectSettingDrawerShow=e},expression:"projectSettingDrawerShow"}},[t.projectSettingDrawerShow?a("Tabs",{model:{value:t.projectSettingDrawerTab,callback:function(e){t.projectSettingDrawerTab=e},expression:"projectSettingDrawerTab"}},[a("TabPane",{attrs:{label:t.$L("项目设置"),name:"setting"}},[a("project-setting",{attrs:{canload:t.projectSettingDrawerShow&&"setting"==t.projectSettingDrawerTab,projectid:t.projectid},on:{"on-change":t.getDetail}})],1),t._v(" "),a("TabPane",{attrs:{label:t.$L("已归档任务"),name:"archived"}},[a("project-archived",{attrs:{canload:t.projectSettingDrawerShow&&"archived"==t.projectSettingDrawerTab,projectid:t.projectid}})],1),t._v(" "),a("TabPane",{attrs:{label:t.$L("项目统计"),name:"statistics"}},[a("project-statistics",{ref:"statistics",attrs:{canload:t.projectSettingDrawerShow&&"statistics"==t.projectSettingDrawerTab,projectid:t.projectid}})],1),t._v(" "),a("TabPane",{attrs:{label:t.$L("成员管理"),name:"member"}},[a("project-users",{attrs:{canload:t.projectSettingDrawerShow&&"member"==t.projectSettingDrawerTab,projectid:t.projectid}})],1)],1):t._e()],1)],1)},staticRenderFns:[]}},645:function(t,e,a){var i=a(2)(a(479),a(545),!1,function(t){a(475),a(477)},"data-v-ea87b5f6",null);t.exports=i.exports}});