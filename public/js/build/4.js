webpackJsonp([4],{272:function(t,e,i){var a=i(2)(i(275),i(276),!1,function(t){i(273)},"data-v-5457ca2e",null);t.exports=a.exports},273:function(t,e,i){var a=i(274);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(1)("75177e9a",a,!0,{})},274:function(t,e,i){(t.exports=i(0)(!1)).push([t.i,".w-content[data-v-5457ca2e]{position:absolute;top:72px;left:0;right:0;bottom:0;overflow:auto;background-repeat:no-repeat;background-position:50%;background-color:#eee;background-size:cover}.w-content .w-container[data-v-5457ca2e]{min-height:500px}",""])},275:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"WContent",data:function(){return{bgid:-1}},mounted:function(){this.bgid=$A.runNum(this.usrInfo.bgid)},watch:{usrInfo:{handler:function(t){this.bgid=$A.runNum(t.bgid)},deep:!0}},methods:{getBgUrl:function(t,e){return t<0?"none":(t=Math.max(1,parseInt(t)),"url("+window.location.origin+"/images/bg/"+(e?"thumb/":"")+t+".jpg)")}}}},276:function(t,e){t.exports={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"w-content",style:"background-image:"+this.getBgUrl(this.bgid)},[this._t("default")],2)},staticRenderFns:[]}},281:function(t,e,i){"use strict";e.a={methods:{openProject:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.goForward({name:"project-panel",params:{projectid:t,statistics:i,other:e||{}}})},outProject:function(t,e){var i=this;this.$Modal.confirm({title:this.$L("退出项目"),content:this.$L("你确定要退出此项目吗？"),loading:!0,onOk:function(){$A.apiAjax({url:"project/out?projectid="+t,error:function(){i.$Modal.remove(),alert(i.$L("网络繁忙，请稍后再试！"))},success:function(t){i.$Modal.remove(),"function"==typeof e&&e(),setTimeout(function(){1===t.ret?i.$Message.success(t.msg):i.$Modal.error({title:i.$L("温馨提示"),content:t.msg})},350)}})}})},favorProject:function(t,e,i){var a=this;$A.apiAjax({url:"project/favor",data:{act:t,projectid:e},error:function(){a.$Modal.remove(),alert(a.$L("网络繁忙，请稍后再试！"))},success:function(t){a.$Modal.remove(),"function"==typeof i&&i(),setTimeout(function(){1===t.ret?a.$Message.success(t.msg):a.$Modal.error({title:a.$L("温馨提示"),content:t.msg})},350)}})},deleteProject:function(t,e){var i=this;this.$Modal.confirm({title:this.$L("删除项目"),content:this.$L("你确定要删除此项目吗？"),loading:!0,onOk:function(){$A.apiAjax({url:"project/delete?projectid="+t,error:function(){i.$Modal.remove(),alert(i.$L("网络繁忙，请稍后再试！"))},success:function(a){i.$Modal.remove(),"function"==typeof e&&e(),setTimeout(function(){1===a.ret?(i.$Message.success(a.msg),$A.triggerTaskInfoListener("deleteproject",{projectid:t})):i.$Modal.error({title:i.$L("温馨提示"),content:a.msg})},350)}})}})}}}},294:function(t,e,i){var a=i(2)(i(297),i(298),!1,function(t){i(295)},null,null);t.exports=a.exports},295:function(t,e,i){var a=i(296);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(1)("5c628eca",a,!0,{})},296:function(t,e,i){(t.exports=i(0)(!1)).push([t.i,'.tags-wrap{display:inline-block;width:100%;min-height:32px;padding:2px 7px;border:1px solid #dddee1;border-radius:4px;color:#495060;background:#fff;position:relative;cursor:text;vertical-align:middle;line-height:normal;-webkit-transition:border .2s ease-in-out,background .2s ease-in-out,-webkit-box-shadow .2s ease-in-out;transition:border .2s ease-in-out,background .2s ease-in-out,-webkit-box-shadow .2s ease-in-out}.tags-wrap .tags-input,.tags-wrap .tags-item{position:relative;float:left;color:#495060;background-color:#f1f8ff;border-radius:3px;line-height:22px;margin:2px 6px 2px 0;padding:0 20px 0 6px}.tags-wrap .tags-input .tags-content,.tags-wrap .tags-item .tags-content{line-height:22px}.tags-wrap .tags-input .tags-del,.tags-wrap .tags-item .tags-del{width:20px;height:22px;text-align:center;cursor:pointer;position:absolute;top:-1px;right:0}.tags-wrap .tags-input{max-width:80%;padding:0;background-color:inherit;border:none;color:inherit;height:22px;line-height:22px;-webkit-appearance:none;outline:none;resize:none;overflow:hidden}.tags-wrap .tags-input::-webkit-input-placeholder{color:#bbb}.tags-wrap .tags-input::-moz-placeholder{color:#bbb}.tags-wrap .tags-input::-ms-input-placeholder{color:#bbb}.tags-wrap .tags-input::placeholder{color:#bbb}.tags-wrap .tags-placeholder{position:absolute;left:0;top:0;z-index:-1;color:#ffffff00}.tags-wrap:after{content:"";display:block;height:0;clear:both}',""])},297:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"TagInput",props:{value:{default:""},cut:{default:","},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},placeholder:{default:""},max:{default:0}},data:function(){var t=[];return this.value.split(",").forEach(function(e){e&&t.push(e)}),{minWidth:80,tis:"",tisTimeout:null,showPlaceholder:!0,content:"",disSource:t}},mounted:function(){this.wayMinWidth()},watch:{placeholder:function(){this.wayMinWidth()},value:function(t){var e=[];$A.count(t)>0&&t.split(",").forEach(function(t){t&&e.push(t)}),this.disSource=e},disSource:function(t){var e=this,i="";t.forEach(function(t){""!=i&&(i+=e.cut),i+=t}),this.$emit("input",i)}},methods:{wayMinWidth:function(){var t=this;this.showPlaceholder=!0,this.$nextTick(function(){t.$refs.myPlaceholder&&(t.minWidth=Math.max(t.minWidth,t.$refs.myPlaceholder.offsetWidth)),setTimeout(function(){try{t.minWidth=Math.max(t.minWidth,t.$refs.myPlaceholder.offsetWidth),t.showPlaceholder=!1}catch(t){}$A(t.$refs.myPlaceholder).is(":visible")||t.wayMinWidth()},500)})},pasteText:function(t){t.preventDefault();var e=(t.clipboardData||window.clipboardData).getData("text");this.addTag(!1,e)},clickWrap:function(){this.$refs.myTextarea.focus()},downEnter:function(t){t.preventDefault()},addTag:function(t,e){var i=this;if(13===t.keyCode||!1===t)""!=e.trim()&&-1===this.disSource.indexOf(e.trim())&&this.disSource.push(e.trim()),this.content="";else{if(this.max>0&&this.disSource.length>=this.max)return this.content="",this.tis="最多只能添加"+this.max+"个",clearInterval(this.tisTimeout),void(this.tisTimeout=setTimeout(function(){i.tis=""},2e3));var a=e.trim(),s=a.length-this.cut.length;""!=a&&a.substring(s)===this.cut&&(""!=(a=a.substring(0,s)).trim()&&-1===this.disSource.indexOf(a.trim())&&this.disSource.push(a.trim()),this.content="")}},delTag:function(t){if(!1===t){if(""!==this.content)return;t=this.disSource.length-1}this.disSource.splice(t,1)}}}},298:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tags-wrap",on:{paste:function(e){return t.pasteText(e)},click:t.clickWrap}},[t._l(t.disSource,function(e,a){return i("div",{staticClass:"tags-item"},[i("span",{staticClass:"tags-content",on:{click:function(t){t.stopPropagation()}}},[t._v(t._s(e))]),i("span",{staticClass:"tags-del",on:{click:function(e){return e.stopPropagation(),t.delTag(a)}}},[t._v("×")])])}),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],ref:"myTextarea",staticClass:"tags-input",style:{minWidth:t.minWidth+"px"},attrs:{placeholder:t.tis||t.placeholder,disabled:t.disabled,readonly:t.readonly},domProps:{value:t.content},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.downEnter(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:t.delTag(!1)}],keyup:function(e){return t.addTag(e,t.content)},blur:function(e){return t.addTag(!1,t.content)},input:function(e){e.target.composing||(t.content=e.target.value)}}}),t._v(" "),t.showPlaceholder||""!==t.tis?i("span",{ref:"myPlaceholder",staticClass:"tags-placeholder"},[t._v(t._s(t.tis||t.placeholder))]):t._e()],2)},staticRenderFns:[]}},299:function(t,e,i){var a=i(2)(i(302),i(303),!1,function(t){i(300)},"data-v-5d1cd011",null);t.exports=a.exports},300:function(t,e,i){var a=i(301);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(1)("57691d55",a,!0,{})},301:function(t,e,i){(t.exports=i(0)(!1)).push([t.i,".project-archived .tableFill[data-v-5d1cd011]{margin:12px 12px 20px}",""])},302:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(7),s=i.n(a),o=i(30);e.default={name:"ProjectArchived",components:{DrawerTabsContainer:s.a},props:{projectid:{default:0},canload:{type:Boolean,default:!0}},mixins:[o.a],data:function(){return{loadYet:!1,loadIng:0,columns:[],lists:[],listPage:1,listTotal:0,noDataText:""}},mounted:function(){var t=this;this.canload&&(this.loadYet=!0,this.getLists(!0)),$A.setOnTaskInfoListener("components/project/archived",function(e,i){if(i.projectid==t.projectid)switch(t.lists.some(function(e,a){if(e.id==i.id)return t.lists.splice(a,1,i),!0}),e){case"delete":case"unarchived":t.lists.some(function(e,a){if(e.id==i.id)return t.lists.splice(a,1),!0});break;case"archived":var a=!1;t.lists.some(function(t){if(t.id==i.id)return a=!0}),a||t.lists.unshift(i)}})},watch:{projectid:function(){this.loadYet&&this.getLists(!0)},canload:function(t){t&&!this.loadYet&&(this.loadYet=!0,this.getLists(!0))}},methods:{initLanguage:function(){var t=this;this.noDataText=this.$L("数据加载中....."),this.columns=[{title:this.$L("任务名称"),key:"title",minWidth:120,render:function(e,i){return t.renderTaskTitle(e,i)}},{title:this.$L("创建人"),key:"createuser",minWidth:80,render:function(t,e){return t("UserView",{props:{username:e.row.createuser}})}},{title:this.$L("负责人"),key:"username",minWidth:80,render:function(t,e){return t("UserView",{props:{username:e.row.username}})}},{title:this.$L("完成"),minWidth:70,align:"center",render:function(t,e){return t("span",e.row.complete?"√":"-")}},{title:this.$L("归档时间"),width:160,render:function(t,e){return t("span",$A.formatDate("Y-m-d H:i:s",e.row.archiveddate))}},{title:this.$L("操作"),key:"action",width:100,align:"center",render:function(e,i){return e("Button",{props:{type:"primary",size:"small"},style:{fontSize:"12px"},on:{click:function(){t.$Modal.confirm({title:t.$L("取消归档"),content:t.$L("你确定要取消归档吗？"),loading:!0,onOk:function(){$A.apiAjax({url:"project/task/edit",method:"post",data:{act:"unarchived",taskid:i.row.id},error:function(){t.$Modal.remove(),alert(t.$L("网络繁忙，请稍后再试！"))},success:function(e){t.$Modal.remove(),t.getLists(),setTimeout(function(){1===e.ret?(t.$Message.success(e.msg),$A.triggerTaskInfoListener("unarchived",e.data),$A.triggerTaskInfoChange(i.row.id)):t.$Modal.error({title:t.$L("温馨提示"),content:e.msg})},350)}})}})}}},t.$L("取消归档"))}}]},setPage:function(t){this.listPage=t,this.getLists()},setPageSize:function(t){Math.max($A.runNum(this.listPageSize),10)!=t&&(this.listPageSize=t,this.getLists())},getLists:function(t){var e=this;if(!0===t&&(this.listPage=1),0==this.projectid)return this.lists=[],this.listTotal=0,void(this.noDataText=this.$L("没有相关的数据"));this.loadIng++,this.noDataText=this.$L("数据加载中....."),$A.apiAjax({url:"project/task/lists",data:{page:Math.max(this.listPage,1),pagesize:Math.max($A.runNum(this.listPageSize),10),projectid:this.projectid,archived:"已归档"},complete:function(){e.loadIng--},error:function(){e.noDataText=e.$L("数据加载失败！")},success:function(t){1===t.ret?(e.lists=t.data.lists,e.listTotal=t.data.total,e.noDataText=e.$L("没有相关的数据")):(e.lists=[],e.listTotal=0,e.noDataText=t.msg)}})}}}},303:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("drawer-tabs-container",[i("div",{staticClass:"project-archived"},[i("Table",{ref:"tableRef",staticClass:"tableFill",attrs:{columns:t.columns,data:t.lists,loading:t.loadIng>0,"no-data-text":t.noDataText,stripe:""}}),t._v(" "),i("Page",{staticClass:"pageBox",attrs:{total:t.listTotal,current:t.listPage,disabled:t.loadIng>0,"page-size-opts":[10,20,30,50,100],placement:"top","show-elevator":"","show-sizer":"","show-total":"",transfer:"",simple:t.windowMax768},on:{"on-change":t.setPage,"on-page-size-change":t.setPageSize}})],1)])},staticRenderFns:[]}},304:function(t,e,i){var a=i(2)(i(307),i(308),!1,function(t){i(305)},"data-v-4fe24b67",null);t.exports=a.exports},305:function(t,e,i){var a=i(306);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(1)("75fcf5d4",a,!0,{})},306:function(t,e,i){(t.exports=i(0)(!1)).push([t.i,".project-users[data-v-4fe24b67]{padding:0 12px}.project-users .tableFill[data-v-4fe24b67]{margin:12px 0 20px}",""])},307:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(7),s=i.n(a);e.default={name:"ProjectUsers",components:{DrawerTabsContainer:s.a},props:{projectid:{default:0},canload:{type:Boolean,default:!0}},data:function(){return{loadYet:!1,loadIng:0,columns:[],lists:[],listPage:1,listTotal:0,noDataText:""}},mounted:function(){this.canload&&(this.loadYet=!0,this.getLists(!0))},watch:{projectid:function(){this.loadYet&&this.getLists(!0)},canload:function(t){t&&!this.loadYet&&(this.loadYet=!0,this.getLists(!0))}},methods:{initLanguage:function(){var t=this;this.noDataText=this.$L("数据加载中....."),this.columns=[{title:this.$L("头像"),minWidth:60,maxWidth:100,render:function(t,e){return t("UserImg",{props:{info:e.row},style:{width:"30px",height:"30px",fontSize:"16px",lineHeight:"30px",borderRadius:"15px",verticalAlign:"middle"}})}},{title:this.$L("用户名"),key:"username",minWidth:80,ellipsis:!0},{title:this.$L("昵称"),minWidth:80,ellipsis:!0,render:function(t,e){return t("span",e.row.nickname||"-")}},{title:this.$L("职位/职称"),minWidth:100,ellipsis:!0,render:function(t,e){return t("span",e.row.profession||"-")}},{title:this.$L("成员角色"),minWidth:100,render:function(e,i){return e("span",i.row.isowner?t.$L("项目负责人"):t.$L("成员"))}},{title:this.$L("加入时间"),width:160,render:function(t,e){return t("span",$A.formatDate("Y-m-d H:i:s",e.row.indate))}},{title:this.$L("操作"),key:"action",width:80,align:"center",render:function(e,i){return e("Button",{props:{type:"primary",size:"small"},style:{fontSize:"12px"},on:{click:function(){t.$Modal.confirm({title:t.$L("移出成员"),content:t.$L("你确定要将此成员移出项目吗？"),loading:!0,onOk:function(){$A.apiAjax({url:"project/users/join",data:{act:"delete",projectid:i.row.projectid,username:i.row.username},error:function(){t.$Modal.remove(),alert(t.$L("网络繁忙，请稍后再试！"))},success:function(e){t.$Modal.remove(),t.getLists(),setTimeout(function(){1===e.ret?t.$Message.success(e.msg):t.$Modal.error({title:t.$L("温馨提示"),content:e.msg})},350)}})}})}}},t.$L("删除"))}}]},setPage:function(t){this.listPage=t,this.getLists()},setPageSize:function(t){Math.max($A.runNum(this.listPageSize),10)!=t&&(this.listPageSize=t,this.getLists())},getLists:function(t){var e=this;if(!0===t&&(this.listPage=1),0==this.projectid)return this.lists=[],this.listTotal=0,void(this.noDataText=this.$L("没有相关的数据"));this.loadIng++,this.noDataText=this.$L("数据加载中....."),$A.apiAjax({url:"project/users/lists",data:{page:Math.max(this.listPage,1),pagesize:Math.max($A.runNum(this.listPageSize),10),projectid:this.projectid},complete:function(){e.loadIng--},error:function(){e.noDataText=e.$L("数据加载失败！")},success:function(t){1===t.ret?(e.lists=t.data.lists,e.listTotal=t.data.total,e.noDataText=e.$L("没有相关的数据")):(e.lists=[],e.listTotal=0,e.noDataText=t.msg)}})},addUser:function(){var t=this;this.userValue="",this.$Modal.confirm({render:function(e){return e("div",[e("div",{style:{fontSize:"16px",fontWeight:"500",marginBottom:"20px"}},t.$L("添加成员")),e("UserInput",{props:{value:t.userValue,multiple:!0,noprojectid:t.projectid,placeholder:t.$L("请输入昵称/用户名搜索")},on:{input:function(e){t.userValue=e}}})])},loading:!0,onOk:function(){if(t.userValue){var e=t.userValue;$A.apiAjax({url:"project/users/join",data:{act:"join",projectid:t.projectid,username:e},error:function(){t.$Modal.remove(),alert(t.$L("网络繁忙，请稍后再试！"))},success:function(e){t.$Modal.remove(),t.getLists(),setTimeout(function(){1===e.ret?t.$Message.success(e.msg):t.$Modal.error({title:t.$L("温馨提示"),content:e.msg})},350)}})}else t.$Modal.remove()}})}}}},308:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("drawer-tabs-container",[i("div",{staticClass:"project-users"},[i("Button",{attrs:{loading:t.loadIng>0,type:"primary",icon:"md-add"},on:{click:t.addUser}},[t._v(t._s(t.$L("添加成员")))]),t._v(" "),i("Table",{ref:"tableRef",staticClass:"tableFill",attrs:{columns:t.columns,data:t.lists,loading:t.loadIng>0,"no-data-text":t.noDataText,stripe:""}}),t._v(" "),i("Page",{staticClass:"pageBox",attrs:{total:t.listTotal,current:t.listPage,disabled:t.loadIng>0,"page-size-opts":[10,20,30,50,100],placement:"top","show-elevator":"","show-sizer":"","show-total":"",transfer:"",simple:t.windowMax768},on:{"on-change":t.setPage,"on-page-size-change":t.setPageSize}})],1)])},staticRenderFns:[]}},309:function(t,e,i){var a=i(2)(i(312),i(313),!1,function(t){i(310)},"data-v-68e4a577",null);t.exports=a.exports},310:function(t,e,i){var a=i(311);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(1)("0a07fc7d",a,!0,{})},311:function(t,e,i){(t.exports=i(0)(!1)).push([t.i,'.project-statistics .tableFill[data-v-68e4a577]{margin:12px 12px 20px}.project-statistics ul.state-overview[data-v-68e4a577]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.project-statistics ul.state-overview>li[data-v-68e4a577]{-webkit-box-flex:1;-ms-flex:1;flex:1;cursor:pointer;margin:0 10px 5px}.project-statistics ul.state-overview>li>div[data-v-68e4a577]{position:relative;-webkit-box-shadow:0 1px 1px rgba(0,0,0,.05);box-shadow:0 1px 1px rgba(0,0,0,.05);-webkit-transition:all .2s;transition:all .2s;border-radius:6px;color:#fff;height:110px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.project-statistics ul.state-overview>li>div.terques[data-v-68e4a577]{background:#17be6b}.project-statistics ul.state-overview>li>div.purple[data-v-68e4a577]{background:#a218a5}.project-statistics ul.state-overview>li>div.red[data-v-68e4a577]{background:#ed3f14}.project-statistics ul.state-overview>li>div.yellow[data-v-68e4a577]{background:#f90}.project-statistics ul.state-overview>li>div.blue[data-v-68e4a577]{background:#2d8cf0}.project-statistics ul.state-overview>li>div[data-v-68e4a577]:hover{-webkit-box-shadow:2px 2px 8px 0 rgba(0,0,0,.38);box-shadow:2px 2px 8px 0 rgba(0,0,0,.38)}.project-statistics ul.state-overview>li>div[data-v-68e4a577]:after{position:absolute;content:"";left:50%;bottom:3px;width:0;height:2px;-webkit-transform:translate(-50%);transform:translate(-50%);background-color:#fff;border-radius:2px;-webkit-transition:all .3s;transition:all .3s;opacity:0}.project-statistics ul.state-overview>li>div>h1[data-v-68e4a577]{font-size:36px;margin:-2px 0 0;padding:0;font-weight:500}.project-statistics ul.state-overview>li>div>p[data-v-68e4a577]{font-size:18px;margin:0;padding:0}.project-statistics ul.state-overview>li.active>div[data-v-68e4a577]:after{width:90%;opacity:1}',""])},312:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(7),s=i.n(a),o=i(30);e.default={name:"ProjectStatistics",components:{DrawerTabsContainer:s.a},props:{projectid:{default:0},canload:{type:Boolean,default:!0}},mixins:[o.a],data:function(){return{loadYet:!1,loadIng:0,columns:[],taskType:"未完成",lists:[],listPage:1,listTotal:0,noDataText:"",statistics_unfinished:0,statistics_overdue:0,statistics_complete:0}},mounted:function(){var t=this;this.canload&&(this.loadYet=!0,this.getLists(!0)),$A.setOnTaskInfoListener("components/project/statistics",function(e,i){if(i.projectid==t.projectid)switch(t.lists.some(function(e,a){if(e.id==i.id)return t.lists.splice(a,1,i),!0}),e){case"delete":case"archived":t.lists.some(function(e,a){if(e.id==i.id)return t.lists.splice(a,1),e.complete?t.statistics_complete--:t.statistics_unfinished++,!0});break;case"unarchived":var a=!1;t.lists.some(function(e){if(e.id==i.id)return e.complete?t.statistics_complete++:t.statistics_unfinished--,a=!0}),a||t.lists.unshift(i);break;case"complete":t.statistics_complete++,t.statistics_unfinished--;break;case"unfinished":t.statistics_complete--,t.statistics_unfinished++}})},watch:{projectid:function(){this.loadYet&&this.getLists(!0)},canload:function(t){t&&!this.loadYet&&(this.loadYet=!0,this.getLists(!0))},taskType:function(){this.loadYet&&this.getLists(!0)}},methods:{initLanguage:function(){var t=this;this.noDataText=this.$L("数据加载中....."),this.columns=[{title:this.$L("任务名称"),key:"title",minWidth:120,render:function(e,i){return t.renderTaskTitle(e,i)}},{title:this.$L("创建人"),key:"createuser",minWidth:80,render:function(t,e){return t("UserView",{props:{username:e.row.createuser}})}},{title:this.$L("负责人"),key:"username",minWidth:80,render:function(t,e){return t("UserView",{props:{username:e.row.username}})}},{title:this.$L("完成"),minWidth:70,align:"center",render:function(t,e){return t("span",e.row.complete?"√":"-")}},{title:this.$L("创建时间"),width:160,render:function(t,e){return t("span",$A.formatDate("Y-m-d H:i:s",e.row.indate))}}]},setTaskType:function(t){this.taskType=t},setPage:function(t){this.listPage=t,this.getLists()},setPageSize:function(t){Math.max($A.runNum(this.listPageSize),10)!=t&&(this.listPageSize=t,this.getLists())},getLists:function(t){var e=this;if(!0===t&&(this.listPage=1),0==this.projectid)return this.lists=[],this.listTotal=0,void(this.noDataText=this.$L("没有相关的数据"));this.loadIng++;var i=this.taskType;this.noDataText=this.$L("数据加载中....."),$A.apiAjax({url:"project/task/lists",data:{page:Math.max(this.listPage,1),pagesize:Math.max($A.runNum(this.listPageSize),10),projectid:this.projectid,type:this.taskType,statistics:1},complete:function(){e.loadIng--},error:function(){e.noDataText=e.$L("数据加载失败！")},success:function(t){i==e.taskType&&(1===t.ret?(e.lists=t.data.lists,e.listTotal=t.data.total,e.noDataText=e.$L("没有相关的数据")):(e.lists=[],e.listTotal=0,e.noDataText=t.msg),e.statistics_unfinished=t.data.statistics_unfinished||0,e.statistics_overdue=t.data.statistics_overdue||0,e.statistics_complete=t.data.statistics_complete||0)}})}}}},313:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("drawer-tabs-container",[i("div",{staticClass:"project-statistics"},[i("ul",{staticClass:"state-overview"},[i("li",{class:["未完成"===t.taskType?"active":""],on:{click:function(e){t.taskType="未完成"}}},[i("div",{staticClass:"yellow"},[i("h1",{staticClass:"count"},[t._v(t._s(t.statistics_unfinished))]),t._v(" "),i("p",[t._v(t._s(t.$L("未完成任务")))])])]),t._v(" "),i("li",{class:["已超期"===t.taskType?"active":""],on:{click:function(e){t.taskType="已超期"}}},[i("div",{staticClass:"red"},[i("h1",{staticClass:"count"},[t._v(t._s(t.statistics_overdue))]),t._v(" "),i("p",[t._v(t._s(t.$L("超期任务")))])])]),t._v(" "),i("li",{class:["已完成"===t.taskType?"active":""],on:{click:function(e){t.taskType="已完成"}}},[i("div",{staticClass:"terques"},[i("h1",{staticClass:"count"},[t._v(t._s(t.statistics_complete))]),t._v(" "),i("p",[t._v(t._s(t.$L("已完成任务")))])])])]),t._v(" "),i("Table",{ref:"tableRef",staticClass:"tableFill",attrs:{columns:t.columns,data:t.lists,loading:t.loadIng>0,"no-data-text":t.noDataText,stripe:""}}),t._v(" "),i("Page",{staticClass:"pageBox",attrs:{total:t.listTotal,current:t.listPage,disabled:t.loadIng>0,"page-size-opts":[10,20,30,50,100],placement:"top","show-elevator":"","show-sizer":"","show-total":"",transfer:"",simple:t.windowMax768},on:{"on-change":t.setPage,"on-page-size-change":t.setPageSize}})],1)])},staticRenderFns:[]}},456:function(t,e,i){var a=i(457);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(1)("9a40cff8",a,!0,{})},457:function(t,e,i){(t.exports=i(0)(!1)).push([t.i,'.project ul.project-list[data-v-2d4e6ce7]{padding:5px;max-width:2200px;margin:0 auto}.project ul.project-list li[data-v-2d4e6ce7]{float:left;width:20%;display:-webkit-box;display:-ms-flexbox;display:flex}@media (max-width:2000px){.project ul.project-list li[data-v-2d4e6ce7]{width:25%}}@media (max-width:1400px){.project ul.project-list li[data-v-2d4e6ce7]{width:33.33%}}@media (max-width:1080px){.project ul.project-list li[data-v-2d4e6ce7]{width:50%}}@media (max-width:640px){.project ul.project-list li[data-v-2d4e6ce7]{width:100%}}.project ul.project-list li .project-item[data-v-2d4e6ce7]{-webkit-box-flex:1;-ms-flex:1;flex:1;margin:10px;width:100%;height:313px;padding:20px;background-color:#fff;border-radius:4px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.project ul.project-list li .project-item .project-head[data-v-2d4e6ce7]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.project ul.project-list li .project-item .project-head .project-loading[data-v-2d4e6ce7]{width:18px;height:18px;margin-right:6px;margin-top:3px}.project ul.project-list li .project-item .project-head .project-title[data-v-2d4e6ce7]{-webkit-box-flex:1;-ms-flex:1;flex:1;font-size:16px;padding-right:6px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#333;cursor:pointer}.project ul.project-list li .project-item .project-head .project-setting[data-v-2d4e6ce7]{width:30px;text-align:right}.project ul.project-list li .project-item .project-head .project-setting .project-setting-icon[data-v-2d4e6ce7]{cursor:pointer;color:#333}.project ul.project-list li .project-item .project-head .project-setting .project-setting-icon[data-v-2d4e6ce7]:hover{color:#0396f2}.project ul.project-list li .project-item .project-num[data-v-2d4e6ce7]{-webkit-box-flex:1;-ms-flex:1;flex:1;padding:34px 0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;position:relative}.project ul.project-list li .project-item .project-num[data-v-2d4e6ce7]:before{content:"";position:absolute;width:1px;height:60%;background-color:#efefef}.project ul.project-list li .project-item .project-num .project-circle[data-v-2d4e6ce7]{-webkit-box-flex:1;-ms-flex:1;flex:1;text-align:center;margin-right:10px}.project ul.project-list li .project-item .project-num .project-circle .project-circle-box[data-v-2d4e6ce7]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.project ul.project-list li .project-item .project-num .project-circle .project-circle-box .project-circle-num[data-v-2d4e6ce7]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end;font-weight:600}.project ul.project-list li .project-item .project-num .project-circle .project-circle-box .project-circle-num em[data-v-2d4e6ce7]{color:#62c5fe;font-size:26px}.project ul.project-list li .project-item .project-num .project-circle .project-circle-box .project-circle-num span[data-v-2d4e6ce7]{color:#666}.project ul.project-list li .project-item .project-num .project-circle .project-circle-box .project-circle-num span[data-v-2d4e6ce7]:before{content:"/"}.project ul.project-list li .project-item .project-num .project-circle .project-circle-box .project-circle-title[data-v-2d4e6ce7]{font-size:12px;padding-top:4px;color:#999}.project ul.project-list li .project-item .project-num .project-situation[data-v-2d4e6ce7]{-webkit-box-flex:1;-ms-flex:1;flex:1;position:relative}.project ul.project-list li .project-item .project-num .project-situation ul[data-v-2d4e6ce7]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.project ul.project-list li .project-item .project-num .project-situation ul>li[data-v-2d4e6ce7]{width:100%;color:#bbb;font-size:12px;white-space:nowrap;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:6px 0;line-height:20px}.project ul.project-list li .project-item .project-num .project-situation ul>li>em[data-v-2d4e6ce7]{padding-left:14px;font-size:18px;color:#666;font-weight:500}.project ul.project-list li .project-item .project-bottom[data-v-2d4e6ce7]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;border-top:1px solid #efefef;padding:18px 0;cursor:default;position:relative}.project ul.project-list li .project-item .project-bottom .project-iconbtn[data-v-2d4e6ce7]{-webkit-box-flex:1;-ms-flex:1;flex:1;width:50%;text-align:center;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:4px 0}.project ul.project-list li .project-item .project-bottom .project-iconbtn.project-people[data-v-2d4e6ce7]{width:auto;min-width:36px;position:absolute;bottom:18px;right:0;cursor:pointer;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.project ul.project-list li .project-item .project-bottom .project-iconbtn.project-people .userimg-count[data-v-2d4e6ce7],.project ul.project-list li .project-item .project-bottom .project-iconbtn.project-people .userimg-icon[data-v-2d4e6ce7]{width:36px;height:36px;border-radius:18px;margin-left:-16px;border:2px solid #fff}.project ul.project-list li .project-item .project-bottom .project-iconbtn.project-people .userimg-count[data-v-2d4e6ce7]{-webkit-transform:scale(1);transform:scale(1);color:#fff;font-size:16px;font-weight:500;line-height:32px;background-color:#62c5fe}.project ul.project-list li .project-item .project-bottom .project-iconbtn .project-iconbtn-icon[data-v-2d4e6ce7]{font-size:16px;margin-right:6px;color:#999}.project ul.project-list li .project-item .project-bottom .project-iconbtn .project-iconbtn-text[data-v-2d4e6ce7]{color:#999;cursor:pointer}.project ul.project-list li .project-item .project-bottom .project-iconbtn .project-iconbtn-text[data-v-2d4e6ce7]:hover{color:#0396f2}.project ul.project-list[data-v-2d4e6ce7]:after,.project ul.project-list[data-v-2d4e6ce7]:before{display:table;content:""}.project ul.project-list[data-v-2d4e6ce7]:after{clear:both}',""])},458:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(4),s=i.n(a),o=i(294),n=i.n(o),r=i(272),c=i.n(r),l=i(299),d=i.n(l),p=i(304),u=i.n(p),f=i(309),h=i.n(f),m=i(459),g=i.n(m),v=i(464),x=i.n(v),j=i(469),b=i.n(j),w=i(281),$=i(49),L=i.n($);s.a.component("TagInput",n.a),e.default={components:{WDrawer:L.a,ProjectMyManage:b.a,ProjectMyJoin:x.a,ProjectMyFavor:g.a,ProjectStatistics:h.a,ProjectUsers:u.a,ProjectArchived:d.a,WContent:c.a},mixins:[w.a],data:function(){return{loadIng:0,addShow:!1,formAdd:{title:"",labels:[],template:0},ruleAdd:{},labelLists:[],lists:[],listPage:1,listTotal:0,listPageSize:20,projectDrawerShow:!1,projectDrawerTab:"archived",projectListDrawerShow:!1,projectListDrawerTab:"myjoin",handleProjectId:0}},mounted:function(){var t=this;this.getLists(!0),$A.setOnTaskInfoListener("pages/project",function(e,i){var a=t.lists.find(function(t){return t.id==i.projectid});if(a){var s=i.persons?!!i.persons.find(function(e){return e.username==t.usrName}):null,o=function(t){t?(a.unfinished++,!0===s&&a.self_count++):(a.unfinished--,!0===s&&a.self_count--)},n=function(t){t?(a.complete++,!0===s&&a.self_complete++):(a.complete--,!0===s&&a.self_complete--)};switch(e){case"deleteproject":case"deletelabel":t.getLists(!0);break;case"create":o(!0);break;case"delete":case"archived":i.complete?n():o();break;case"unarchived":i.complete?n(!0):o(!0);break;case"complete":n(!0),o();break;case"unfinished":n(),o(!0)}}},!0)},deactivated:function(){this.addShow=!1,this.projectDrawerShow=!1,this.projectListDrawerShow=!1},watch:{usrName:function(){this.usrLogin&&this.getLists(!0)}},methods:{initLanguage:function(){this.labelLists=[{label:this.$L("空白模板"),value:[]},{label:this.$L("软件开发"),value:[this.$L("产品规划"),this.$L("前端开发"),this.$L("后端开发"),this.$L("测试"),this.$L("发布"),this.$L("其它")]},{label:this.$L("产品开发"),value:[this.$L("产品计划"),this.$L("正在设计"),this.$L("正在研发"),this.$L("测试"),this.$L("准备发布"),this.$L("发布成功")]}],this.ruleAdd={title:[{required:!0,message:this.$L("请填写项目名称！"),trigger:"change"},{type:"string",min:2,message:this.$L("项目名称至少2个字！"),trigger:"change"}]}},setPage:function(t){this.listPage=t,this.getLists()},setPageSize:function(t){Math.max($A.runNum(this.listPageSize),20)!=t&&(this.listPageSize=t,this.getLists())},getLists:function(t){var e=this;!0===t&&(this.listPage=1),this.loadIng++,$A.apiAjax({url:"project/lists",data:{page:Math.max(this.listPage,1),pagesize:Math.max($A.runNum(this.listPageSize),20)},complete:function(){e.loadIng--},success:function(t){1===t.ret?(e.lists=t.data.lists,e.listTotal=t.data.total):(e.lists=[],e.listTotal=0)}})},addLabels:function(){var t=this;this.labelsValue="",this.$Modal.confirm({render:function(e){return e("div",[e("div",{style:{fontSize:"16px",fontWeight:"500",marginBottom:"20px"}},t.$L("添加流程")),e("TagInput",{props:{value:t.labelsValue,autofocus:!0,placeholder:t.$L("请输入流程名称，多个可用英文逗号分隔。")},on:{input:function(e){t.labelsValue=e}}})])},onOk:function(){t.labelsValue&&$A.trim(t.labelsValue).split(",").forEach(function(e){$A.trim(e)&&t.formAdd.labels.push($A.trim(e))})}})},onAdd:function(){var t=this;this.$refs.add.validate(function(e){e&&(t.loadIng++,$A.apiAjax({url:"project/add",data:t.formAdd,complete:function(){t.loadIng--},success:function(e){1===e.ret?(t.addShow=!1,t.$Message.success(e.msg),t.$refs.add.resetFields(),t.$set(t.formAdd,"template",0),t.getLists(!0)):t.$Modal.error({title:t.$L("温馨提示"),content:e.msg})}}))})},openComplete:function(t){t.complete>0?this.openProject(t.id,t,"已完成"):this.handleProject("open",t)},handleProject:function(t,e){var i=this;switch(e&&(this.handleProjectId=e.id),t){case"favor":this.favorProject("add",e.id);break;case"rename":this.renameProject(e);break;case"transfer":this.transferProject(e);break;case"delete":this.deleteProject(e.id,function(){i.getLists()});break;case"out":this.outProject(e.id,function(){i.getLists()});break;case"open":this.openProject(e.id,e);break;case"archived":case"member":case"statistics":this.projectDrawerShow=!0,this.projectDrawerTab=t;break;case"myjoin":case"myfavor":case"mycreate":this.projectListDrawerShow=!0,this.projectListDrawerTab=t}},renameProject:function(t){var e=this;this.renameValue="",this.$Modal.confirm({render:function(t){return t("div",[t("div",{style:{fontSize:"16px",fontWeight:"500",marginBottom:"20px"}},e.$L("重命名项目")),t("Input",{props:{value:e.renameValue,autofocus:!0,placeholder:e.$L("请输入新的项目名称")},on:{input:function(t){e.renameValue=t}}})])},loading:!0,onOk:function(){if(e.renameValue){e.$set(t,"loadIng",!0);var i=e.renameValue;$A.apiAjax({url:"project/rename",data:{projectid:t.id,title:i},complete:function(){e.$set(t,"loadIng",!1)},error:function(){e.$Modal.remove(),alert(e.$L("网络繁忙，请稍后再试！"))},success:function(a){e.$Modal.remove(),e.$set(t,"title",i),setTimeout(function(){1===a.ret?e.$Message.success(a.msg):e.$Modal.error({title:e.$L("温馨提示"),content:a.msg})},350)}})}else e.$Modal.remove()}})},transferProject:function(t){var e=this;this.transferValue="",this.$Modal.confirm({render:function(i){return i("div",[i("div",{style:{fontSize:"16px",fontWeight:"500",marginBottom:"20px"}},e.$L("移交项目")),i("UserInput",{props:{value:e.transferValue,nousername:t.username,placeholder:e.$L("请输入昵称/用户名搜索")},on:{input:function(t){e.transferValue=t}}})])},loading:!0,onOk:function(){if(e.transferValue){e.$set(t,"loadIng",!0);var i=e.transferValue;$A.apiAjax({url:"project/transfer",data:{projectid:t.id,username:i},complete:function(){e.$set(t,"loadIng",!1)},error:function(){e.$Modal.remove(),alert(e.$L("网络繁忙，请稍后再试！"))},success:function(t){e.$Modal.remove(),e.getLists(),setTimeout(function(){1===t.ret?e.$Message.success(t.msg):e.$Modal.error({title:e.$L("温馨提示"),content:t.msg})},350)}})}else e.$Modal.remove()}})},selfProportion:function(t,e){return e<=0?100:Math.round(t/e*100)}}}},459:function(t,e,i){var a=i(2)(i(462),i(463),!1,function(t){i(460)},"data-v-75728fa7",null);t.exports=a.exports},460:function(t,e,i){var a=i(461);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(1)("24a88314",a,!0,{})},461:function(t,e,i){(t.exports=i(0)(!1)).push([t.i,".project-my-favor .tableFill[data-v-75728fa7]{margin:12px 12px 20px}",""])},462:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(281),s=i(7),o=i.n(s);e.default={name:"ProjectMyFavor",components:{DrawerTabsContainer:o.a},props:{canload:{type:Boolean,default:!0}},mixins:[a.a],data:function(){return{loadYet:!1,loadIng:0,columns:[],lists:[],listPage:1,listTotal:0,noDataText:""}},mounted:function(){this.canload&&(this.loadYet=!0,this.getLists(!0))},watch:{canload:function(t){t&&!this.loadYet&&(this.loadYet=!0,this.getLists(!0))}},methods:{initLanguage:function(){var t=this;this.noDataText=this.$L("数据加载中....."),this.columns=[{title:this.$L("项目名称"),key:"title",minWidth:100,render:function(e,i){return e("a",{attrs:{href:"javascript:void(0)"},on:{click:function(){t.openProject(i.row.id)}}},i.row.title)}},{title:this.$L("收藏时间"),minWidth:160,render:function(t,e){return t("span",$A.formatDate("Y-m-d H:i:s",e.row.uindate))}},{title:this.$L("操作"),key:"action",width:80,align:"center",render:function(e,i){return e("Button",{props:{type:"primary",size:"small"},style:{fontSize:"12px"},on:{click:function(){t.$Modal.confirm({title:t.$L("取消收藏"),content:t.$L("你确定要取消收藏此项目吗？"),loading:!0,onOk:function(){t.favorProject("cancel",i.row.id,function(){t.getLists()})}})}}},t.$L("取消"))}}]},setPage:function(t){this.listPage=t,this.getLists()},setPageSize:function(t){Math.max($A.runNum(this.listPageSize),10)!=t&&(this.listPageSize=t,this.getLists())},getLists:function(t){var e=this;!0===t&&(this.listPage=1),this.loadIng++,this.noDataText=this.$L("数据加载中....."),$A.apiAjax({url:"project/lists",data:{act:"favor",page:Math.max(this.listPage,1),pagesize:Math.max($A.runNum(this.listPageSize),10)},complete:function(){e.loadIng--},error:function(){e.noDataText=e.$L("数据加载失败！")},success:function(t){1===t.ret?(e.lists=t.data.lists,e.listTotal=t.data.total,e.noDataText=e.$L("没有相关的数据")):(e.lists=[],e.listTotal=0,e.noDataText=t.msg)}})}}}},463:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("drawer-tabs-container",[i("div",{staticClass:"project-my-favor"},[i("Table",{ref:"tableRef",staticClass:"tableFill",attrs:{columns:t.columns,data:t.lists,loading:t.loadIng>0,"no-data-text":t.noDataText,stripe:""}}),t._v(" "),i("Page",{staticClass:"pageBox",attrs:{total:t.listTotal,current:t.listPage,disabled:t.loadIng>0,"page-size-opts":[10,20,30,50,100],placement:"top","show-elevator":"","show-sizer":"","show-total":"",transfer:"",simple:t.windowMax768},on:{"on-change":t.setPage,"on-page-size-change":t.setPageSize}})],1)])},staticRenderFns:[]}},464:function(t,e,i){var a=i(2)(i(467),i(468),!1,function(t){i(465)},"data-v-01a231ca",null);t.exports=a.exports},465:function(t,e,i){var a=i(466);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(1)("4dc6f993",a,!0,{})},466:function(t,e,i){(t.exports=i(0)(!1)).push([t.i,".project-my-join .tableFill[data-v-01a231ca]{margin:12px 12px 20px}",""])},467:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(281),s=i(7),o=i.n(s);e.default={name:"ProjectMyJoin",components:{DrawerTabsContainer:o.a},props:{canload:{type:Boolean,default:!0}},mixins:[a.a],data:function(){return{loadYet:!1,loadIng:0,columns:[],lists:[],listPage:1,listTotal:0,noDataText:""}},mounted:function(){this.canload&&(this.loadYet=!0,this.getLists(!0))},watch:{canload:function(t){t&&!this.loadYet&&(this.loadYet=!0,this.getLists(!0))}},methods:{initLanguage:function(){var t=this;this.noDataText=this.$L("数据加载中....."),this.columns=[{title:this.$L("项目名称"),key:"title",minWidth:100,render:function(e,i){return e("a",{attrs:{href:"javascript:void(0)"},on:{click:function(){t.openProject(i.row.id)}}},i.row.title)}},{title:this.$L("加入时间"),minWidth:160,render:function(t,e){return t("span",$A.formatDate("Y-m-d H:i:s",e.row.uindate))}},{title:this.$L("操作"),key:"action",width:80,align:"center",render:function(e,i){return e("Button",{props:{type:"primary",size:"small"},style:{fontSize:"12px"},on:{click:function(){t.outProject(i.row.id,function(){t.getLists()})}}},t.$L("退出"))}}]},setPage:function(t){this.listPage=t,this.getLists()},setPageSize:function(t){Math.max($A.runNum(this.listPageSize),10)!=t&&(this.listPageSize=t,this.getLists())},getLists:function(t){var e=this;!0===t&&(this.listPage=1),this.loadIng++,this.noDataText=this.$L("数据加载中....."),$A.apiAjax({url:"project/lists",data:{act:"join",page:Math.max(this.listPage,1),pagesize:Math.max($A.runNum(this.listPageSize),10)},complete:function(){e.loadIng--},error:function(){e.noDataText=e.$L("数据加载失败！")},success:function(t){1===t.ret?(e.lists=t.data.lists,e.listTotal=t.data.total,e.noDataText=e.$L("没有相关的数据")):(e.lists=[],e.listTotal=0,e.noDataText=t.msg)}})}}}},468:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("drawer-tabs-container",[i("div",{staticClass:"project-my-join"},[i("Table",{ref:"tableRef",staticClass:"tableFill",attrs:{columns:t.columns,data:t.lists,loading:t.loadIng>0,"no-data-text":t.noDataText,stripe:""}}),t._v(" "),i("Page",{staticClass:"pageBox",attrs:{total:t.listTotal,current:t.listPage,disabled:t.loadIng>0,"page-size-opts":[10,20,30,50,100],placement:"top","show-elevator":"","show-sizer":"","show-total":"",transfer:"",simple:t.windowMax768},on:{"on-change":t.setPage,"on-page-size-change":t.setPageSize}})],1)])},staticRenderFns:[]}},469:function(t,e,i){var a=i(2)(i(472),i(473),!1,function(t){i(470)},"data-v-02633933",null);t.exports=a.exports},470:function(t,e,i){var a=i(471);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(1)("50efbae0",a,!0,{})},471:function(t,e,i){(t.exports=i(0)(!1)).push([t.i,".project-my-manage .tableFill[data-v-02633933]{margin:12px 12px 20px}",""])},472:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(281),s=i(7),o=i.n(s);e.default={name:"ProjectMyManage",components:{DrawerTabsContainer:o.a},props:{canload:{type:Boolean,default:!0}},mixins:[a.a],data:function(){return{loadYet:!1,loadIng:0,columns:[],lists:[],listPage:1,listTotal:0,noDataText:""}},mounted:function(){this.canload&&(this.loadYet=!0,this.getLists(!0))},watch:{canload:function(t){t&&!this.loadYet&&(this.loadYet=!0,this.getLists(!0))}},methods:{initLanguage:function(){var t=this;this.noDataText=this.$L("数据加载中....."),this.columns=[{title:this.$L("项目名称"),key:"title",minWidth:100,render:function(e,i){return e("a",{attrs:{href:"javascript:void(0)"},on:{click:function(){t.openProject(i.row.id)}}},i.row.title)}},{title:this.$L("创建时间"),minWidth:160,render:function(t,e){return t("span",$A.formatDate("Y-m-d H:i:s",e.row.indate))}},{title:this.$L("操作"),key:"action",width:80,align:"center",render:function(e,i){return e("Button",{props:{type:"primary",size:"small"},style:{fontSize:"12px"},on:{click:function(){t.deleteProject(i.row.id,function(){t.getLists()})}}},t.$L("删除"))}}]},setPage:function(t){this.listPage=t,this.getLists()},setPageSize:function(t){Math.max($A.runNum(this.listPageSize),10)!=t&&(this.listPageSize=t,this.getLists())},getLists:function(t){var e=this;!0===t&&(this.listPage=1),this.loadIng++,this.noDataText=this.$L("数据加载中....."),$A.apiAjax({url:"project/lists",data:{act:"manage",page:Math.max(this.listPage,1),pagesize:Math.max($A.runNum(this.listPageSize),10)},complete:function(){e.loadIng--},error:function(){e.noDataText=e.$L("数据加载失败！")},success:function(t){1===t.ret?(e.lists=t.data.lists,e.listTotal=t.data.total,e.noDataText=e.$L("没有相关的数据")):(e.lists=[],e.listTotal=0,e.noDataText=t.msg)}})}}}},473:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("drawer-tabs-container",[i("div",{staticClass:"project-my-manage"},[i("Table",{ref:"tableRef",staticClass:"tableFill",attrs:{columns:t.columns,data:t.lists,loading:t.loadIng>0,"no-data-text":t.noDataText,stripe:""}}),t._v(" "),i("Page",{staticClass:"pageBox",attrs:{total:t.listTotal,current:t.listPage,disabled:t.loadIng>0,"page-size-opts":[10,20,30,50,100],placement:"top","show-elevator":"","show-sizer":"","show-total":"",transfer:"",simple:t.windowMax768},on:{"on-change":t.setPage,"on-page-size-change":t.setPageSize}})],1)])},staticRenderFns:[]}},474:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"w-main project"},[i("v-title",[t._v(t._s(t.$L("项目"))+"-"+t._s(t.$L("轻量级的团队在线协作")))]),t._v(" "),i("div",{staticClass:"w-nav"},[i("div",{staticClass:"nav-row"},[i("div",{staticClass:"w-nav-left"},[i("div",{staticClass:"page-nav-left"},[i("span",{staticClass:"hover",on:{click:function(e){t.addShow=!0}}},[i("i",{staticClass:"ft icon"},[t._v("")]),t._v(" "+t._s(t.$L("新建项目")))]),t._v(" "),t.loadIng>0?i("div",{staticClass:"page-nav-loading"},[i("w-loading")],1):i("div",{staticClass:"page-nav-refresh"},[i("em",{on:{click:function(e){return t.getLists(!0)}}},[t._v(t._s(t.$L("刷新")))])])])]),t._v(" "),i("div",{staticClass:"w-nav-flex"}),t._v(" "),i("div",{staticClass:"w-nav-right m768-show"},[i("Dropdown",{attrs:{trigger:"click",transfer:""},on:{"on-click":t.handleProject}},[i("Icon",{attrs:{type:"md-menu",size:"18"}}),t._v(" "),i("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[i("DropdownItem",{attrs:{name:"myjoin"}},[t._v(t._s(t.$L("参与的项目")))]),t._v(" "),i("DropdownItem",{attrs:{name:"myfavor"}},[t._v(t._s(t.$L("收藏的项目")))]),t._v(" "),i("DropdownItem",{attrs:{name:"mycreate"}},[t._v(t._s(t.$L("我管理的项目")))])],1)],1)],1),t._v(" "),i("div",{staticClass:"w-nav-right m768-hide"},[i("span",{staticClass:"ft hover",on:{click:function(e){return t.handleProject("myjoin",null)}}},[i("i",{staticClass:"ft icon"},[t._v("")]),t._v(" "+t._s(t.$L("参与的项目")))]),t._v(" "),i("span",{staticClass:"ft hover",on:{click:function(e){return t.handleProject("myfavor",null)}}},[i("i",{staticClass:"ft icon"},[t._v("")]),t._v(" "+t._s(t.$L("收藏的项目")))]),t._v(" "),i("span",{staticClass:"ft hover",on:{click:function(e){return t.handleProject("mycreate",null)}}},[i("i",{staticClass:"ft icon"},[t._v("")]),t._v(" "+t._s(t.$L("我管理的项目")))])])])]),t._v(" "),i("w-content",[i("ul",{staticClass:"project-list"},t._l(t.lists,function(e){return i("li",[i("div",{staticClass:"project-item"},[i("div",{staticClass:"project-head"},[!0===e.loadIng?i("div",{staticClass:"project-loading"},[i("w-loading")],1):t._e(),t._v(" "),i("div",{staticClass:"project-title",on:{click:function(i){return t.handleProject("open",e)}}},[t._v(t._s(e.title))]),t._v(" "),i("div",{staticClass:"project-setting"},[i("Dropdown",{staticClass:"right-info",attrs:{trigger:"click",transfer:""},on:{"on-click":function(i){return t.handleProject(i,e)}}},[i("Icon",{staticClass:"project-setting-icon",attrs:{type:"md-settings",size:"16"}}),t._v(" "),i("Dropdown-menu",{attrs:{slot:"list"},slot:"list"},[i("Dropdown-item",{attrs:{name:"open"}},[t._v(t._s(t.$L("打开")))]),t._v(" "),i("Dropdown-item",{attrs:{name:"favor"}},[t._v(t._s(t.$L("收藏")))]),t._v(" "),e.isowner?i("Dropdown-item",{attrs:{name:"rename"}},[t._v(t._s(t.$L("重命名")))]):t._e(),t._v(" "),e.isowner?i("Dropdown-item",{attrs:{name:"transfer"}},[t._v(t._s(t.$L("移交项目")))]):t._e(),t._v(" "),e.isowner?i("Dropdown-item",{attrs:{name:"delete"}},[t._v(t._s(t.$L("删除")))]):i("Dropdown-item",{attrs:{name:"out"}},[t._v(t._s(t.$L("退出")))])],1)],1)],1)]),t._v(" "),i("div",{staticClass:"project-num",on:{click:function(i){return t.handleProject("open",e)}}},[i("div",{staticClass:"project-circle"},[i("i-circle",{attrs:{size:100,"trail-width":8,"stroke-width":8,percent:t.selfProportion(e.self_complete,e.self_count),"stroke-linecap":"round","stroke-color":"#62C5FE"}},[i("div",{staticClass:"project-circle-box"},[i("div",{staticClass:"project-circle-num"},[i("em",[t._v(t._s(e.self_complete))]),t._v(" "),i("span",[t._v(t._s(e.self_count))])]),t._v(" "),i("div",{staticClass:"project-circle-title"},[t._v(t._s(t.$L("个人总计")))])])])],1),t._v(" "),i("div",{staticClass:"project-situation"},[i("ul",[i("li",[t._v(t._s(t.$L("项目总任务数"))),i("em",[t._v(t._s(e.complete+e.unfinished))])]),t._v(" "),i("li",[t._v(t._s(t.$L("项目已完成数"))),i("em",[t._v(t._s(e.complete))])]),t._v(" "),i("li",[t._v(t._s(t.$L("项目未完成数"))),i("em",[t._v(t._s(e.unfinished))])])])])]),t._v(" "),i("div",{staticClass:"project-bottom"},[i("div",{staticClass:"project-iconbtn"},[i("Icon",{staticClass:"project-iconbtn-icon",attrs:{type:"md-stats"}}),t._v(" "),i("div",{staticClass:"project-iconbtn-text",on:{click:function(i){return i.stopPropagation(),t.handleProject("statistics",e)}}},[t._v(t._s(t.$L("项目统计")))])],1),t._v(" "),i("div",{staticClass:"project-iconbtn"},[i("Icon",{staticClass:"project-iconbtn-icon",attrs:{type:"md-filing"}}),t._v(" "),i("div",{staticClass:"project-iconbtn-text",on:{click:function(i){return i.stopPropagation(),t.handleProject("archived",e)}}},[t._v(t._s(t.$L("已归档任务")))])],1),t._v(" "),i("div",{staticClass:"project-iconbtn project-people",on:{click:function(i){return i.stopPropagation(),t.handleProject("member",e)}}},[t._l(e.people_lists,function(t,e){return i("UserImg",{key:e,staticClass:"userimg-icon",attrs:{info:t,"two-words":"","show-title":""}})}),t._v(" "),e.people_count>99?i("div",{staticClass:"userimg-count",attrs:{title:e.people_count}},[t._v("99+")]):e.people_count>5?i("div",{staticClass:"userimg-count"},[t._v(t._s(e.people_count))]):t._e()],2)])])])}),0),t._v(" "),t.listTotal>0?i("Page",{staticClass:"pageBox",attrs:{total:t.listTotal,current:t.listPage,disabled:t.loadIng>0,pageSize:t.listPageSize,"page-size-opts":[20,40,60,100],placement:"top",transfer:"","show-elevator":"","show-sizer":"","show-total":"",simple:t.windowMax768},on:{"on-change":t.setPage,"on-page-size-change":t.setPageSize}}):t._e()],1),t._v(" "),i("Modal",{attrs:{title:t.$L("新建项目"),closable:!1,"mask-closable":!1,"class-name":"simple-modal"},model:{value:t.addShow,callback:function(e){t.addShow=e},expression:"addShow"}},[i("Form",{ref:"add",attrs:{model:t.formAdd,rules:t.ruleAdd,"label-width":80},nativeOn:{submit:function(t){t.preventDefault()}}},[i("FormItem",{attrs:{prop:"title",label:t.$L("项目名称")}},[i("Input",{attrs:{type:"text"},model:{value:t.formAdd.title,callback:function(e){t.$set(t.formAdd,"title",e)},expression:"formAdd.title"}})],1),t._v(" "),i("FormItem",{attrs:{prop:"labels",label:t.$L("项目模板")}},[i("Select",{on:{"on-change":function(e){t.$set(t.formAdd,"labels",t.labelLists[e].value)}},model:{value:t.formAdd.template,callback:function(e){t.$set(t.formAdd,"template",e)},expression:"formAdd.template"}},t._l(t.labelLists,function(e,a){return i("Option",{key:a,attrs:{value:a}},[t._v(t._s(e.label))])}),1)],1),t._v(" "),i("FormItem",{attrs:{label:t.$L("项目流程")}},[i("div",{staticStyle:{"line-height":"38px"}},t._l(t.formAdd.labels,function(e,a){return i("span",[a>0?i("span",[t._v(">")]):t._e(),t._v(" "),i("Tag",{attrs:{closable:"",size:"large",color:"primary"},on:{"on-close":function(){t.formAdd.labels.splice(a,1)}}},[t._v(t._s(e))])],1)}),0),t._v(" "),t.formAdd.labels.length>0?i("div",{staticStyle:{"margin-top":"4px"}}):t._e(),t._v(" "),i("div",{staticStyle:{"margin-bottom":"-16px"}},[i("Button",{attrs:{icon:"ios-add",type:"dashed"},on:{click:t.addLabels}},[t._v(t._s(t.$L("添加流程")))])],1)])],1),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"default"},on:{click:function(e){t.addShow=!1}}},[t._v(t._s(t.$L("取消")))]),t._v(" "),i("Button",{attrs:{type:"primary",loading:t.loadIng>0},on:{click:t.onAdd}},[t._v(t._s(t.$L("添加")))])],1)],1),t._v(" "),i("WDrawer",{attrs:{maxWidth:"1000"},model:{value:t.projectDrawerShow,callback:function(e){t.projectDrawerShow=e},expression:"projectDrawerShow"}},[t.projectDrawerShow?i("Tabs",{model:{value:t.projectDrawerTab,callback:function(e){t.projectDrawerTab=e},expression:"projectDrawerTab"}},[i("TabPane",{attrs:{label:t.$L("已归档任务"),name:"archived"}},[i("project-archived",{attrs:{canload:t.projectDrawerShow&&"archived"==t.projectDrawerTab,projectid:t.handleProjectId}})],1),t._v(" "),i("TabPane",{attrs:{label:t.$L("项目统计"),name:"statistics"}},[i("project-statistics",{attrs:{canload:t.projectDrawerShow&&"statistics"==t.projectDrawerTab,projectid:t.handleProjectId}})],1),t._v(" "),i("TabPane",{attrs:{label:t.$L("成员管理"),name:"member"}},[i("project-users",{attrs:{canload:t.projectDrawerShow&&"member"==t.projectDrawerTab,projectid:t.handleProjectId}})],1)],1):t._e()],1),t._v(" "),i("WDrawer",{attrs:{maxWidth:"740"},model:{value:t.projectListDrawerShow,callback:function(e){t.projectListDrawerShow=e},expression:"projectListDrawerShow"}},[t.projectListDrawerShow?i("Tabs",{model:{value:t.projectListDrawerTab,callback:function(e){t.projectListDrawerTab=e},expression:"projectListDrawerTab"}},[i("TabPane",{attrs:{label:t.$L("参与的项目"),name:"myjoin"}},[i("project-my-join",{attrs:{canload:t.projectListDrawerShow&&"myjoin"==t.projectListDrawerTab}})],1),t._v(" "),i("TabPane",{attrs:{label:t.$L("收藏的项目"),name:"myfavor"}},[i("project-my-favor",{attrs:{canload:t.projectListDrawerShow&&"myfavor"==t.projectListDrawerTab}})],1),t._v(" "),i("TabPane",{attrs:{label:t.$L("管理的项目"),name:"mycreate"}},[i("project-my-manage",{attrs:{canload:t.projectListDrawerShow&&"mycreate"==t.projectListDrawerTab}})],1)],1):t._e()],1)],1)},staticRenderFns:[]}},644:function(t,e,i){var a=i(2)(i(458),i(474),!1,function(t){i(456)},"data-v-2d4e6ce7",null);t.exports=a.exports}});